{"version":3,"file":"static/js/545.b0d1c0a9.chunk.js","mappings":"4OAAaA,EAAa,KACbC,EAAkB,eAEVC,EAAAA,WACpB,WAAYC,IAAW,eACtBC,KAAKD,SAAWE,OAAOF,GAYvB,OAXA,6BACD,SAAMG,GAGL,OAFAA,EAAQD,OAAOC,IAELC,MAAMN,GACRK,EACGA,EAAME,SAAS,OAASF,EAAMC,MAAMP,GACxC,UAAN,OAAiBM,GAEVF,KAAKD,SAASM,QAAQ,KAAMC,mBAAmBJ,QAEvD,EAdmBJ,I,gLCGNS,EAAa,GAAbA,OAAAA,EAAAA,MAAAA,KAAAA,WAAAA,SAAAA,IAAf,OAAeA,GAAAA,EAAAA,EAAAA,GAAAA,IAAAA,MAAf,WAA4BC,GAA5B,8FACOC,EAAO,IAAIC,EAAAA,GAAWC,EAAAA,IAD7B,SAGwBF,EAAKG,MAAMJ,EAAK,CACtCK,SAAU,WAJZ,WAGOC,EAHP,QAOeC,GAPf,sBAQQ,IAAIC,MAAJ,mCAAsCF,EAASG,SARvD,cAWOC,EAAS,IAAIC,UAXpB,KAaaD,EAbb,kBAa6CJ,EAASM,OAbtD,4DAaOC,EAbP,KAaoBC,gBAbpB,eAagE,cAEzDC,EAAOC,SAASC,cAAc,SAC/BC,KAAOlB,EAEZa,EAAIM,KAAKC,OAAOL,GAMTM,EAAWR,EAAIS,cAAc,qBAGlCC,EADgB,OAAbF,GAAuC,KAAlBA,EAASH,KAC1BG,EAASH,KAET,IAAIM,IAAI,eAAgBxB,GAAKyB,WAK/BJ,EAAWR,EAAIS,cAAc,SAGlCI,EADgB,OAAbL,GAA8C,KAAzBA,EAASM,YACzBN,EAASM,YAET3B,EAvCX,kBA2CQ,CAAEuB,KAAAA,EAAMG,MAAAA,EAAO1B,IAAKM,EAASsB,WA3CrC,mEA8CA,SAASC,EAAYnC,GACpB,GAAIA,EAAMC,MAAMN,EAAAA,IACf,OAAOK,EACD,GAAIA,EAAME,SAAS,OAASF,EAAMC,MAAMP,EAAAA,IAC9C,MAAM,UAAN,OAAiBM,GAEjB,MAAM,IAAIc,MAAM,WAQf,SACYsB,EAAU,GAAVA,OAAAA,EAAAA,MAAAA,KAAAA,WAAAA,SAAAA,IAAf,OAAeA,GAAAA,EAAAA,EAAAA,GAAAA,IAAAA,MAAf,WAAyB9B,GAAzB,sEACSA,EADT,OAEO,gBAFP,+CAGU,CACN0B,MAAO,cACPH,KAAM,OACNvB,IAAK,gBANT,uBASgBD,EAAa8B,EAAY7B,IATzC,0GAae,SAAS+B,EAASC,GAChC,IAAMtC,GAAQuC,EAAAA,EAAAA,UACd,GAA2BC,EAAAA,EAAAA,YAA3B,eAAOC,EAAP,KAAcC,EAAd,KAEA,OACC,iCACC,wBACC,SAAC,KAAD,kIAKD,8BACC,6BACC,SAAC,KAAD,kBADD,QAGA,iBACCC,SAAQ,mCAAE,WAAMC,GAAN,oFACTA,EAAMC,iBADG,kBAI2BT,EAAUpC,EAAM8C,QAAQC,OAJnD,gBAIAf,EAJA,EAIAA,MAAOH,EAJP,EAIOA,KAAMvB,EAJb,EAIaA,IAErBgC,EAAMU,OAAOF,QAAQG,MAAMC,IAAI,CAC9BlB,MAAAA,EACAH,KAAAA,EACAvB,IAAAA,IATO,kDAYR6C,QAAQV,MAAR,MACAC,EAAU,KAAMX,YAbR,0DAAF,sDADT,UAkBC,kBACCqB,IAAKpD,EACLqD,aAAcf,EAAMU,OAAOF,QAAQG,MAAMK,IAAI,OAC7CC,YAAY,uBACZC,UAAU,mBAGZ,iBAAMA,UAAU,QAAhB,SAAyBf,QAE1B,gBACCe,UAAU,eACVC,QAAS,WACRnB,EAAMU,OAAOF,QAAQG,MAAMC,IAAI,CAC9BlB,MAAO,GACPH,KAAM,GACNvB,IAAK,MANR,UAUC,SAAC,KAAD","sources":["SearchBuilder.js","pages/settings/TabCloak.js"],"sourcesContent":["export const whitespace = /\\s/;\nexport const http_s_protocol = /^https?:\\/\\//;\n\nexport default class SearchBuilder {\n\tconstructor(template) {\n\t\tthis.template = String(template);\n\t}\n\tquery(input) {\n\t\tinput = String(input);\n\n\t\tif (input.match(http_s_protocol)) {\n\t\t\treturn input;\n\t\t} else if (input.includes('.') && !input.match(whitespace)) {\n\t\t\treturn `http://${input}`;\n\t\t} else {\n\t\t\treturn this.template.replace('%s', encodeURIComponent(input));\n\t\t}\n\t}\n}\n","import BareClient from 'bare-client';\nimport { useRef, useState } from 'react';\nimport { Obfuscated } from '../../obfuscate';\nimport { BARE_API } from '../../root';\nimport { http_s_protocol, whitespace } from '../../SearchBuilder';\n\nasync function extract_data(url) {\n\tconst bare = new BareClient(BARE_API);\n\n\tconst response = await bare.fetch(url, {\n\t\tredirect: 'follow',\n\t});\n\n\tif (!response.ok) {\n\t\tthrow new Error(`Response was not OK. Got ${response.status}`);\n\t}\n\n\tconst parser = new DOMParser();\n\n\tconst dom = parser.parseFromString(`${await response.text()}`, 'text/html');\n\n\tconst base = document.createElement('base');\n\tbase.href = url;\n\n\tdom.head.append(base);\n\n\tlet icon;\n\tlet title;\n\n\t{\n\t\tconst selector = dom.querySelector('link[rel*=\"icon\"]');\n\n\t\tif (selector !== null && selector.href !== '') {\n\t\t\ticon = selector.href;\n\t\t} else {\n\t\t\ticon = new URL('/favicon.ico', url).toString();\n\t\t}\n\t}\n\n\t{\n\t\tconst selector = dom.querySelector('title');\n\n\t\tif (selector !== null && selector.textContent !== '') {\n\t\t\ttitle = selector.textContent;\n\t\t} else {\n\t\t\ttitle = url;\n\t\t}\n\t}\n\n\treturn { icon, title, url: response.finalURL };\n}\n\nfunction resolve_url(input) {\n\tif (input.match(http_s_protocol)) {\n\t\treturn input;\n\t} else if (input.includes('.') && !input.match(whitespace)) {\n\t\treturn `http://${input}`;\n\t} else {\n\t\tthrow new Error('Bad URL');\n\t}\n}\n\n/**\n *\n * @param {string} url\n * @returns {{title:string,icon:string,url:string}}\n */\nasync function cloak_url(url) {\n\tswitch (url) {\n\t\tcase 'about:blank':\n\t\t\treturn {\n\t\t\t\ttitle: 'about:blank',\n\t\t\t\ticon: 'none',\n\t\t\t\turl: 'about:blank',\n\t\t\t};\n\t\tdefault:\n\t\t\treturn await extract_data(resolve_url(url));\n\t}\n}\n\nexport default function TabCloak(props) {\n\tconst input = useRef();\n\tconst [error, set_error] = useState();\n\n\treturn (\n\t\t<>\n\t\t\t<p>\n\t\t\t\t<Obfuscated>\n\t\t\t\t\tTab Cloaking allows you to disguise Holy Unblocker as any website such\n\t\t\t\t\tas your school's home page, new tab, etc.\n\t\t\t\t</Obfuscated>\n\t\t\t</p>\n\t\t\t<label>\n\t\t\t\t<span>\n\t\t\t\t\t<Obfuscated>URL</Obfuscated>:\n\t\t\t\t</span>\n\t\t\t\t<form\n\t\t\t\t\tonSubmit={async event => {\n\t\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst { title, icon, url } = await cloak_url(input.current.value);\n\n\t\t\t\t\t\t\tprops.layout.current.cloak.set({\n\t\t\t\t\t\t\t\ttitle,\n\t\t\t\t\t\t\t\ticon,\n\t\t\t\t\t\t\t\turl,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tconsole.error(error);\n\t\t\t\t\t\t\tset_error(error.toString());\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<input\n\t\t\t\t\t\tref={input}\n\t\t\t\t\t\tdefaultValue={props.layout.current.cloak.get('url')}\n\t\t\t\t\t\tplaceholder=\"https://example.org/\"\n\t\t\t\t\t\tclassName=\"theme-input\"\n\t\t\t\t\t></input>\n\t\t\t\t</form>\n\t\t\t\t<span className=\"error\">{error}</span>\n\t\t\t</label>\n\t\t\t<div\n\t\t\t\tclassName=\"theme-button\"\n\t\t\t\tonClick={() => {\n\t\t\t\t\tprops.layout.current.cloak.set({\n\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\ticon: '',\n\t\t\t\t\t\turl: '',\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Obfuscated>Reset Cloak</Obfuscated>\n\t\t\t</div>\n\t\t</>\n\t);\n}\n"],"names":["whitespace","http_s_protocol","SearchBuilder","template","this","String","input","match","includes","replace","encodeURIComponent","extract_data","url","bare","BareClient","BARE_API","fetch","redirect","response","ok","Error","status","parser","DOMParser","text","dom","parseFromString","base","document","createElement","href","head","append","selector","querySelector","icon","URL","toString","title","textContent","finalURL","resolve_url","cloak_url","TabCloak","props","useRef","useState","error","set_error","onSubmit","event","preventDefault","current","value","layout","cloak","set","console","ref","defaultValue","get","placeholder","className","onClick"],"sourceRoot":""}