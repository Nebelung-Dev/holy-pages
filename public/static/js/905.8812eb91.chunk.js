"use strict";(self.webpackChunkholyunblocker_website=self.webpackChunkholyunblocker_website||[]).push([[905],{6740:function(e,t,r){r.d(t,{$0:function(){return x},_V:function(){return p},sr:function(){return g}});var a=r(7762),n=r(885),s=r(5861),c=r(5671),i=r(3144),o=r(7757),u=r.n(o),l=r(2791),h=r(3504),d=r(5829),f=r(9040),m=r(184),p=function(){function e(t){(0,c.Z)(this,e),this.server=t}return(0,i.Z)(e,[{key:"game",value:function(){var e=(0,s.Z)(u().mark((function e(t){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(new URL("./games/".concat(t,"/"),this.server));case 2:if((r=e.sent).ok){e.next=7;break}return e.next=6,r.json();case 6:throw e.sent;case 7:return e.next=9,r.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"game_plays",value:function(){var e=(0,s.Z)(u().mark((function e(t,r){var a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(new URL("./games/".concat(t,"/plays?")+new URLSearchParams({token:r}),this.server),{method:"PUT"});case 2:if((a=e.sent).ok){e.next=7;break}return e.next=6,a.json();case 6:throw e.sent;case 7:return e.next=9,a.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"sort_params",value:function(e){for(var t in e)switch(typeof e[t]){case"undefined":case"object":delete e[t]}return e}},{key:"category",value:function(){var e=(0,s.Z)(u().mark((function e(t,r){var a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(new URL("./games/?"+new URLSearchParams(this.sort_params(t)),this.server),{signal:r});case 2:if((a=e.sent).ok){e.next=7;break}return e.next=6,a.json();case 6:throw e.sent;case 7:return e.next=9,a.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}();function v(e){var t=(0,l.useState)(!1),r=(0,n.Z)(t,2),a=r[0],s=r[1];return(0,m.jsx)(h.rU,{to:"".concat((0,f.k)("/games/","player"),"?id=").concat(e.id),onClick:function(){return e.layout.current.setState({expanded:!1})},children:(0,m.jsxs)("div",{className:"item",children:[(0,m.jsx)("div",{className:"thumbnail",children:(0,m.jsx)("img",{alt:"",loading:"lazy",onLoad:function(){return s(!0)},"data-loaded":Number(a),src:"/thumbnails/".concat(e.id,".webp")})}),(0,m.jsx)("div",{className:"name",children:(0,m.jsx)(d.mj,{ellipsis:!0,children:e.name})})]})})}function y(e){return(0,m.jsxs)("div",{className:"item loading",children:[(0,m.jsx)("div",{className:"thumbnail"}),(0,m.jsx)("div",{className:"name"})]})}function g(e){var t,r=[],n=(0,a.Z)(e.items);try{for(n.s();!(t=n.n()).done;){var s=t.value;s.loading?r.push((0,m.jsx)(y,{id:s.id,layout:e.layout},s.id)):r.push((0,m.jsx)(v,{id:s.id,name:s.name,layout:e.layout},s.id))}}catch(c){n.e(c)}finally{n.f()}return r}function x(e){return(0,m.jsxs)("section",{children:[(0,m.jsx)("div",{className:"name",children:(0,m.jsx)("h1",{children:e.name})}),(0,m.jsx)("div",{className:"items",children:(0,m.jsx)(g,{items:e.items,layout:e.layout})})]})}},5905:function(e,t,r){r.r(t),r.d(t,{default:function(){return k}});var a=r(7762),n=r(5861),s=r(5671),c=r(3144),i=r(136),o=r(3668),u=r(7757),l=r.n(u),h=r(2791),d=r(9911),f=r(6740),m=r(3504),p=r(6700),v=r(184),y=(0,p.Z)((0,v.jsx)("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward"),g=r(2167),x=r(2126),b=r(5829),j=r(8424);r(3415);function w(e){return(0,v.jsxs)("section",{className:"expand",children:[(0,v.jsxs)("div",{className:"name",children:[(0,v.jsx)("h1",{children:e.name}),(0,v.jsxs)(m.rU,{to:e.href,className:"see-all",children:["See All",(0,v.jsx)(y,{})]})]}),(0,v.jsx)("div",{className:"items",children:(0,v.jsx)(f.sr,{items:e.items,layout:e.layout})})]})}var k=function(e){(0,i.Z)(r,e);var t=(0,o.Z)(r);function r(e){var a;(0,s.Z)(this,r),(a=t.call(this,e)).limit=8,a.searchbar=(0,h.createRef)(),a.input=(0,h.createRef)(),a.settings=new j.Z("common games",{favorites:[],seen:[]}),a.api=new f._V(d.YA),a.abort=new AbortController;var n=[];for(var c in x)for(var i=0;i<a.limit;i++)n.push({id:i,loading:!0,category:c});return a.state={data:n,category:[],input_focused:!1},a}return(0,c.Z)(r,[{key:"layout",get:function(){return this.props.layout}},{key:"search",value:function(){var e=(0,n.Z)(l().mark((function e(t){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0!==this.abort&&this.abort.abort(),this.abort=new AbortController,e.prev=2,e.next=5,this.api.category({sort:"search",search:t,limit:this.limit},this.abort.signal);case 5:r=e.sent,this.setState({category:r}),e.next=14;break;case 9:if(e.prev=9,e.t0=e.catch(2),"The operation was aborted"===e.t0.message||"The user aborted a request."===e.t0.message){e.next=14;break}return console.error(e.t0),e.abrupt("return",this.setState({error:e.t0}));case 14:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"fetch",value:function(){var e=(0,n.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.api.category({sort:"plays",limitPerCategory:this.limit});case 3:return t=e.sent,e.abrupt("return",this.setState({data:t}));case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",this.setState({error:e.t0}));case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.fetch()}},{key:"componentWillUnmount",value:function(){this.abort.abort()}},{key:"render",value:function(){var e=this;(0,d.jQ)("games-category");var t=this.state.input_focused&&0!==this.state.category.length,r=[];if(t)for(var n=function(t){var a=e.state.category[t],n=void 0;a.category in x?n=x[a.category].short:(console.warn("Unknown category ".concat(a.category)),n="");var s=["option"];t===e.state.last_select&&s.push("hover"),r.push((0,v.jsxs)(m.rU,{onClick:function(){return e.setState({input_focused:!1})},onMouseOver:function(){e.setState({last_select:t})},to:"/games/player.html?id=".concat(a.id),className:s.join(" "),children:[(0,v.jsx)("div",{className:"name",children:(0,v.jsx)(b.mj,{ellipsis:!0,children:a.name})}),(0,v.jsx)("div",{className:"category",children:n})]},a.id))},s=0;s<this.state.category.length;s++)n(s);var c,i={},o=(0,a.Z)(this.state.data);try{for(o.s();!(c=o.n()).done;){var u=c.value;u.category in i||(i[u.category]=[]),i[u.category].push(u)}}catch(y){o.e(y)}finally{o.f()}var l=[];for(var h in i){var f=void 0;for(var p in x)h===p&&(f=x[p].name);l.push((0,v.jsx)(w,{href:"/games/category.html?id=".concat(h),items:i[h],name:f,layout:this.layout},h))}return(0,v.jsxs)("main",{children:[(0,v.jsxs)("div",{className:"search-bar","data-focused":Number(this.state.input_focused),"data-suggested":Number(t),ref:this.searchbar,onBlur:function(t){e.searchbar.current.contains(t.relatedTarget)||e.setState({input_focused:!1})},children:[(0,v.jsxs)("div",{className:"theme-input-bar",children:[(0,v.jsx)(g.Z,{className:"icon"}),(0,v.jsx)("input",{ref:this.input,type:"text",placeholder:"Search by game name",onFocus:function(t){e.setState({input_focused:!0,last_select:-1}),e.search(t.target.value)},onClick:function(t){e.setState({input_focused:!0,last_select:-1}),e.search(t.target.value)},onKeyDown:function(t){var r=!0;switch(t.code){case"Escape":e.setState({input_focused:!1});break;case"ArrowDown":case"ArrowUp":var a,n=e.state.last_select;switch(t.code){case"ArrowDown":a=n>=e.state.category.length-1?0:n+1;break;case"ArrowUp":a=n<=0?e.state.category.length-1:n-1}e.setState({last_select:a});break;case"Enter":var s=e.state.category[e.state.last_select];e.input.current.blur(),e.setState({input_focused:!1}),e.props.navigate("/games/player.html?id=".concat(s.id));break;default:r=!1}r&&t.preventDefault()},onChange:function(t){e.search(t.target.value),e.setState({last_select:-1})}})]}),(0,v.jsx)("div",{className:"suggested",onMouseLeave:function(){e.setState({last_select:-1})},children:r})]}),l]})}}]),r}(h.Component)},2167:function(e,t,r){var a=r(6700),n=r(184);t.Z=(0,a.Z)((0,n.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search")},3415:function(){}}]);
//# sourceMappingURL=905.8812eb91.chunk.js.map