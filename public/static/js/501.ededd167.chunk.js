"use strict";(self.webpackChunkholyunblocker_website=self.webpackChunkholyunblocker_website||[]).push([[501],{6400:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(5861),s=n(5671),a=n(3144),i=n(7757),o=n.n(i),c=n(9911),u=n(9040),l=function(){function e(t){(0,s.Z)(this,e),this.server=t}return(0,a.Z)(e,[{key:"compat",value:function(){var e=(0,r.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(new URL("./compat/".concat(t,"/"),this.server));case 2:if((n=e.sent).ok){e.next=7;break}return e.next=6,n.json();case 6:throw e.sent;case 7:return e.next=9,n.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"game_plays",value:function(){var e=(0,r.Z)(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(new URL("./games/".concat(t,"/plays?")+new URLSearchParams({token:n}),this.server),{method:"PUT"});case 2:if((r=e.sent).ok){e.next=7;break}return e.next=6,r.json();case 6:throw e.sent;case 7:return e.next=9,r.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"sort_params",value:function(e){for(var t in e)switch(typeof e[t]){case"undefined":case"object":delete e[t]}return e}},{key:"category",value:function(){var e=(0,r.Z)(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(new URL("./games/?"+new URLSearchParams(this.sort_params(t)),this.server),{signal:n});case 2:if((r=e.sent).ok){e.next=7;break}return e.next=6,r.json();case 6:throw e.sent;case 7:return e.next=9,r.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function h(e,t){return f.apply(this,arguments)}function f(){return(f=(0,r.Z)(o().mark((function e(t,n){var r,s,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("automatic"!==n){e.next=12;break}return r=new URL(t),s=r.host,a=new l(c.YA),e.prev=3,e.next=6,a.compat(s);case 6:n=e.sent.proxy,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),n=c.nY;case 12:e.t1=n,e.next="stomp"===e.t1?15:"ultraviolet"===e.t1?17:(e.t1,19);break;case 15:return i=(0,u.k)("/compat/","stomp"),e.abrupt("break",21);case 17:return i=(0,u.k)("/compat/","ultraviolet"),e.abrupt("break",21);case 19:return i=(0,u.k)("/compat/","rammerhead"),e.abrupt("break",21);case 21:return e.abrupt("return","".concat(i,"#").concat(t));case 22:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}},2041:function(e,t,n){n.d(t,{Qb:function(){return a},ZP:function(){return o},pS:function(){return i}});var r=n(5671),s=n(3144),a=/\s/,i=/^https?:\/\//,o=function(){function e(t){(0,r.Z)(this,e),this.template=String(t)}return(0,s.Z)(e,[{key:"query",value:function(e){return(e=String(e)).match(i)?e:e.includes(".")&&!e.match(a)?"http://".concat(e):this.template.replace("%s",encodeURIComponent(e))}}]),e}()},501:function(e,t,n){n.r(t),n.d(t,{default:function(){return H}});var r,s=n(5861),a=n(5671),i=n(3144),o=n(136),c=n(3668),u=n(7757),l=n.n(u),h=n(5829),f=n(9911),p=n(2791),v=n(885),d=n(7762),m=n(2982),x=n(7326),b=n(1752),y=n(1120),k=["title","titleId"];function _(){return _=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_.apply(this,arguments)}function w(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function g(e,t){var n=e.title,s=e.titleId,a=w(e,k);return p.createElement("svg",_({width:24,height:24,xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":s},a),n?p.createElement("title",{id:s},n):null,r||(r=p.createElement("path",{d:"M12 2c5.52 0 10 4.48 10 10s-4.48 10-10 10S2 17.52 2 12 6.48 2 12 2zM4 12h4.4c3.407.022 4.922 1.73 4.543 5.127H9.488v2.47a8.004 8.004 0 0010.498-8.083C19.327 12.504 18.332 13 17 13c-2.137 0-3.206-.916-3.206-2.75h-3.748c-.274-2.728.683-4.092 2.87-4.092 0-.975.327-1.597.811-1.97A8.004 8.004 0 004 12z",fill:"currentColor"})))}var j=p.forwardRef(g),Z=(n.p,n(184)),S=function(e){(0,o.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;(0,a.Z)(this,n);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).timeouts=[],e}return(0,i.Z)(n,[{key:"componentWillUnmount",value:function(){this.unmounting=!0;var e,t=(0,d.Z)(this.timeouts);try{for(t.s();!(e=t.n()).done;){var n=(0,v.Z)(e.value,2),r=n[0],s=n[1];r(),clearTimeout(s)}}catch(a){t.e(a)}finally{t.f()}}},{key:"sleep",value:function(){var e=(0,s.Z)(l().mark((function e(t){var n=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.unmounting){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,new Promise((function(e){n.timeouts.push([e,setTimeout(e,t)])}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return(0,Z.jsx)("span",{ref:this.element})}}]),n}(p.Component),L=n(4164),N=n(2041),R=n(5996),U=n(6400),C=n(9631),M=n(4319),E=function(e){(0,o.Z)(n,e);var t=(0,c.Z)(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this,e)).state={title:"",icon:"globe",revoke_icon:!1,src:"",embed:{current:!1},proxy:{current:!1,src:""},first_load:!1},r.links_tried=new WeakMap,r.iframe=(0,p.createRef)(),r.headless=(0,p.createRef)(),r.bare=new R.ZP(f.A4),r.focus_listener=r.focus_listener.bind((0,x.Z)(r)),r}return(0,i.Z)(n,[{key:"layout",get:function(){return this.props.layout}},{key:"embed",value:function(){var e=(0,s.Z)(l().mark((function e(t){var n,r,s=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:t,r=s.length>2&&void 0!==s[2]?s[2]:"globe",e.next=4,this.setState({title:n,src:t,icon:r,embed:{current:!0,src:t}});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"proxy",value:function(){var e=(0,s.Z)(l().mark((function e(t){var n,r,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new N.ZP(this.layout.current.settings.get("search")),r=n.query(t),e.next=4,(0,U.Z)(r,this.layout.current.settings.get("proxy"));case 4:return s=e.sent,e.next=7,this.setState({title:r,src:s,icon:"globe",proxy:{current:!0,src:r}});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"focus_listener",value:function(){this.iframe.current.contentWindow.focus()}},{key:"componentDidMount",value:function(){var e=(0,s.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.addEventListener("focus",this.focus_listener);case 1:if(this.unmounting){e.next=7;break}return this.state.proxy.current&&this.test_proxy_update(),e.next=5,this.sleep(100);case 5:e.next=1;break;case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=(0,s.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.removeEventListener("focus",this.focus_listener),(0,b.Z)((0,y.Z)(n.prototype),"componentWillUnmount",this).call(this);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"test_proxy_update",value:function(){var e;try{e=new this.iframe_window.Function("return location")()}catch(a){return}var t=[];if(e===this.iframe_window.location)t.push(this.state.proxy.src);else{var n=this.iframe_window.document.title;""===n?t.push(e.href):t.push(n);var r,s=this.iframe_window.document.querySelector('link[rel*="icon"]');r=null!==s&&""!==s.href?s.href:new URL("/favicon.ico",e).toString(),this.links_tried.has(e)||this.links_tried.set(e,new Set),this.links_tried.get(e).has(r)||(this.links_tried.get(e).add(r),this.load_icon(r))}this.setState({title:t[0]})}},{key:"iframe_window",get:function(){return this.iframe.current.contentWindow}},{key:"add_fields",value:function(e,t){for(var n=(0,m.Z)(t),r=0;r<n.length;r++)n[r]=(0,Z.jsx)("option",{value:n[r]},n[r]);(0,L.render)(n,e)}},{key:"omnibox_entries",value:function(){var e=(0,s.Z)(l().mark((function e(t){var n,r,s,a,i,o,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.prev=1,void 0!==this.abort&&this.abort.abort(),this.abort=new AbortController,e.next=6,this.bare.fetch("https://www.bing.com/AS/Suggestions?"+new URLSearchParams({qry:t,cvid:"\x01",bareServer:!0}),{signal:this.abort.signal});case 6:if(!(r=e.sent).ok){e.next=15;break}return e.next=10,r.text();case 10:s=e.sent,a=(0,d.Z)(s.matchAll(/<span class="sa_tm_text">(.*?)<\/span>/g));try{for(a.s();!(i=a.n()).done;)o=(0,v.Z)(i.value,2),c=o[1],n.push(c)}catch(u){a.e(u)}finally{a.f()}e.next=18;break;case 15:return e.next=17,r.text();case 17:throw e.sent;case 18:e.next=28;break;case 20:if(e.prev=20,e.t0=e.catch(1),"Failed to fetch"!==e.t0.message){e.next=26;break}console.error("Error fetching Bare server."),e.next=28;break;case 26:if("The operation was aborted"===e.t0.message||"The user aborted a request."===e.t0.message){e.next=28;break}throw e.t0;case 28:return e.abrupt("return",n);case 29:case"end":return e.stop()}}),e,this,[[1,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"load_icon",value:function(){var e=(0,s.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bare.fetch(t);case 2:return n=e.sent,e.t0=this,e.t1=URL,e.next=7,n.blob();case 7:e.t2=e.sent,e.t3=e.t1.createObjectURL.call(e.t1,e.t2),e.t4={icon:e.t3,revoke_icon:!0},e.t0.setState.call(e.t0,e.t4);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"on_icon_error",value:function(){this.state.icon="globe"}},{key:"on_icon_load",value:function(){this.state.revoke_icon&&(this.setState({revoke_icon:!1}),URL.revokeObjectURL(this.state.icon))}},{key:"close",value:function(){this.setState({src:"",first_load:!1,proxy:{current:!1},embed:{current:!1}})}},{key:"fullscreen",value:function(){f.ZP.requestFullscreen()}},{key:"render",value:function(){var e,t=this;return this.state.embed.current?(e="embed",document.documentElement.dataset.service=1):this.state.proxy.current?(e="proxy",document.documentElement.dataset.service=1):delete document.documentElement.dataset.service,(0,Z.jsxs)("div",{className:"service",ref:this.container,"data-current":e,children:[(0,Z.jsxs)("div",{className:"buttons",children:[(0,Z.jsx)(C.Z,{className:"button",onClick:this.close.bind(this)}),"globe"===this.state.icon?(0,Z.jsx)(j,{className:"icon"}):(0,Z.jsx)("img",{className:"icon",alt:"",src:this.state.icon,onError:this.on_icon_error.bind(this),onLoad:this.on_icon_load.bind(this)}),(0,Z.jsx)("p",{className:"title",children:(0,Z.jsx)(h.mj,{ellipsis:!0,children:this.state.title})}),(0,Z.jsx)("div",{className:"shift-right"}),(0,Z.jsx)(M.Z,{className:"button"})]}),(0,Z.jsx)("iframe",{className:"headless",title:"headless",ref:this.headless}),(0,Z.jsx)("iframe",{className:"embed",src:this.state.src,title:"embed",ref:this.iframe,"data-first-load":Number(this.state.first_load),onLoad:function(){""!==t.state.src&&t.setState({first_load:!0})}})]})}}]),n}(S),O=document.createElement("div");var P=(0,n(6700).Z)((0,Z.jsx)("path",{d:"M5 15h2V8.41L18.59 20 20 18.59 8.41 7H15V5H5v10z"}),"NorthWest"),A=n(2167),H=function(e){(0,o.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;(0,a.Z)(this,n);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).service_frame=(0,p.createRef)(),e.input=(0,p.createRef)(),e.form=(0,p.createRef)(),e.suggested=(0,p.createRef)(),e.state={omnibox_entries:[],input_focused:!1},e}return(0,i.Z)(n,[{key:"layout",get:function(){return this.props.layout}},{key:"componentDidMount",value:function(){var e=(0,s.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.on_input();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"on_input",value:function(){var e=(0,s.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.input_value===this.input.current.value){e.next=8;break}return this.input_value=this.input.current.value,e.t0=this,e.next=5,this.service_frame.current.omnibox_entries(this.input.current.value);case 5:e.t1=e.sent,e.t2={omnibox_entries:e.t1},e.t0.setState.call(e.t0,e.t2);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"search_submit",value:function(){var e;-1===this.state.last_select||"input"===this.last_input?e=this.input.current.value:(e=function(e){O.innerHTML=e;var t=O.textContent;return O.innerHTML="",t}(this.state.omnibox_entries[this.state.last_select]),this.input.current.value=e),this.setState({input_focused:!1}),this.service_frame.current.proxy(this.input.current.value),this.on_input()}},{key:"render",value:function(){var e=this;(0,f.jQ)("proxy");var t=this.state.input_focused&&0!==this.state.omnibox_entries.length,n=[];if(t)for(var r=function(t){var r=(0,p.createRef)(),s=["option"];t===e.state.last_select&&s.push("hover"),n.push((0,Z.jsxs)("div",{tabIndex:"0",className:s.join(" "),onClick:function(){e.last_input="select",e.input.current.value=r.current.textContent,e.search_submit()},onMouseOver:function(){e.setState({last_select:t})},children:[(0,Z.jsx)(A.Z,{className:"search"}),(0,Z.jsx)("span",{className:"text",ref:r,dangerouslySetInnerHTML:{__html:e.state.omnibox_entries[t]}}),(0,Z.jsx)(P,{className:"open"})]},t))},s=0;s<this.state.omnibox_entries.length;s++)r(s);return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(E,{layout:this.layout,ref:this.service_frame}),(0,Z.jsxs)("main",{children:[(0,Z.jsxs)("form",{className:"omnibox","data-suggested":Number(t),"data-focused":Number(this.state.input_focused),onSubmit:function(t){t.preventDefault(),e.search_submit()},onBlur:function(t){e.form.current.contains(t.relatedTarget)||e.setState({input_focused:!1})},ref:this.form,children:[(0,Z.jsxs)("div",{className:"theme-input-bar",children:[(0,Z.jsx)(A.Z,{className:"icon"}),(0,Z.jsx)("input",{type:"text",placeholder:"Search Google or type a URL",required:-1===this.state.last_select,autoComplete:"off",list:"proxy-omnibox",ref:this.input,onInput:this.on_input.bind(this),onFocus:function(){e.on_input(),e.setState({input_focused:!0,last_select:-1})},onClick:function(){e.on_input(),e.setState({input_focused:!0,last_select:-1})},onChange:function(){e.last_input="input",e.setState({last_select:-1})},onKeyDown:function(t){var n=!0;switch(t.code){case"Escape":e.setState({input_focused:!1});break;case"ArrowDown":case"ArrowUp":var r,s=e.state.last_select;switch(t.code){case"ArrowDown":r=s>=e.state.omnibox_entries.length-1?0:s+1;break;case"ArrowUp":r=s<=0?e.state.omnibox_entries.length-1:s-1;break;case"Enter":e.search_submit()}e.last_input="select",e.setState({last_select:r});break;default:n=!1}n&&t.preventDefault()}})]}),(0,Z.jsx)("div",{ref:this.suggested,className:"suggested",onMouseLeave:function(){e.setState({last_select:-1})},children:n})]}),(0,Z.jsxs)("p",{children:[(0,Z.jsxs)(h.mj,{children:["This is a free service paid for by our Patreons. If you want faster servers, donate to Holy Unblocker on"," "]}),(0,Z.jsx)(h.pt,{href:f.lS,children:(0,Z.jsx)(h.mj,{children:"Patreon"})}),"."]}),(0,Z.jsxs)("p",{children:[(0,Z.jsx)(h.mj,{children:"Click "}),(0,Z.jsx)(h.pt,{href:f.rA,children:"here"}),(0,Z.jsxs)(h.mj,{children:[" ","to join the TN Discord for access to new Holy Unblocker links."]})]})]})]})}}]),n}(p.Component)},9631:function(e,t,n){var r=n(6700),s=n(184);t.Z=(0,r.Z)((0,s.jsx)("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"ChevronLeft")},4319:function(e,t,n){var r=n(6700),s=n(184);t.Z=(0,r.Z)((0,s.jsx)("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"}),"Fullscreen")},2167:function(e,t,n){var r=n(6700),s=n(184);t.Z=(0,r.Z)((0,s.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search")}}]);
//# sourceMappingURL=501.ededd167.chunk.js.map