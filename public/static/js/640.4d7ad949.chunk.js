"use strict";(self.webpackChunkholyunblocker_website=self.webpackChunkholyunblocker_website||[]).push([[640],{6740:function(e,t,n){n.d(t,{$0:function(){return b},_V:function(){return v},sr:function(){return y}});var r=n(7762),a=n(885),s=n(5861),o=n(5671),i=n(3144),c=n(7757),u=n.n(c),l=n(2791),h=n(3504),p=n(5829),d=n(9040),f=n(184),v=function(){function e(t){(0,o.Z)(this,e),this.server=t}return(0,i.Z)(e,[{key:"game",value:function(){var e=(0,s.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(new URL("./games/".concat(t,"/"),this.server));case 2:if((n=e.sent).ok){e.next=7;break}return e.next=6,n.json();case 6:throw e.sent;case 7:return e.next=9,n.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"game_plays",value:function(){var e=(0,s.Z)(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(new URL("./games/".concat(t,"/plays?")+new URLSearchParams({token:n}),this.server),{method:"PUT"});case 2:if((r=e.sent).ok){e.next=7;break}return e.next=6,r.json();case 6:throw e.sent;case 7:return e.next=9,r.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"sort_params",value:function(e){for(var t in e)switch(typeof e[t]){case"undefined":case"object":delete e[t]}return e}},{key:"category",value:function(){var e=(0,s.Z)(u().mark((function e(t,n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(new URL("./games/?"+new URLSearchParams(this.sort_params(t)),this.server),{signal:n});case 2:if((r=e.sent).ok){e.next=7;break}return e.next=6,r.json();case 6:throw e.sent;case 7:return e.next=9,r.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function m(e){var t=(0,l.useState)(!1),n=(0,a.Z)(t,2),r=n[0],s=n[1];return(0,f.jsx)(h.rU,{to:"".concat((0,d.k)("/games/","player"),"?id=").concat(e.id),onClick:function(){return e.layout.current.setState({expanded:!1})},children:(0,f.jsxs)("div",{className:"item",children:[(0,f.jsx)("div",{className:"thumbnail",children:(0,f.jsx)("img",{alt:"",loading:"lazy",onLoad:function(){return s(!0)},"data-loaded":Number(r),src:"/thumbnails/".concat(e.id,".webp")})}),(0,f.jsx)("div",{className:"name",children:(0,f.jsx)(p.mj,{ellipsis:!0,children:e.name})})]})})}function x(e){return(0,f.jsxs)("div",{className:"item loading",children:[(0,f.jsx)("div",{className:"thumbnail"}),(0,f.jsx)("div",{className:"name"})]})}function y(e){var t,n=[],a=(0,r.Z)(e.items);try{for(a.s();!(t=a.n()).done;){var s=t.value;s.loading?n.push((0,f.jsx)(x,{id:s.id,layout:e.layout},s.id)):n.push((0,f.jsx)(m,{id:s.id,name:s.name,layout:e.layout},s.id))}}catch(o){a.e(o)}finally{a.f()}return n}function b(e){return(0,f.jsxs)("section",{children:[(0,f.jsx)("div",{className:"name",children:(0,f.jsx)("h1",{children:e.name})}),(0,f.jsx)("div",{className:"items",children:(0,f.jsx)(y,{items:e.items,layout:e.layout})})]})}},4766:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(1413),a=n(5987),s=n(5861),o=n(7762),i=n(5671),c=n(3144),u=n(136),l=n(3668),h=n(7757),p=n.n(h),d=n(6700),f=n(184),v=(0,d.Z)((0,f.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),m=n(2791),x=["className","onChange"],y=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(e){var r;(0,i.Z)(this,n),(r=t.call(this,e)).options=[],r.container=(0,m.createRef)();var a,s=[],c=(0,o.Z)(r.props.children);try{for(c.s();!(a=c.n()).done;){var u=a.value;"option"===u.type&&s.push({name:u.props.children,value:u.props.value})}}catch(l){c.e(l)}finally{c.f()}return r.state={value:r.props.value||r.props.defaultValue,open:!1,options:s},r}return(0,c.Z)(n,[{key:"set_value",value:function(){var e=(0,s.Z)(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({value:t,open:!1});case 2:this.container.current.value=this.state.value,"function"===typeof this.props.onChange&&this.props.onChange({target:this.container.current});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,n=this,i=this.props,c=i.className,u=(i.onChange,(0,a.Z)(i,x)),l=[],h=(0,o.Z)(this.state.options);try{var d=function(){var t=e.value,r=t.name,a=t.value,s=["plain-option"];a===n.state.last_select&&s.push("hover"),l.push((0,f.jsx)("div",{className:s.join(" "),onClick:function(){n.set_value(a)},onMouseOver:function(){n.setState({last_select:a})},children:r},a))};for(h.s();!(e=h.n()).done;)d()}catch(g){h.e(g)}finally{h.f()}var m,y=(0,o.Z)(this.state.options);try{for(y.s();!(m=y.n()).done;){var b=m.value;if(b.value===this.state.value){t=b;break}}}catch(g){y.e(g)}finally{y.f()}return void 0===t&&(t=this.state.options[0]),(0,f.jsxs)("div",(0,r.Z)((0,r.Z)({},u),{},{tabIndex:"0",className:"theme-select"+(c?" "+c:""),"data-open":Number(this.state.open),ref:this.container,onKeyDown:function(e){var t=!0;switch(e.code){case"ArrowDown":case"ArrowUp":for(var r,a=0,s=0;s<n.state.options.length;s++){if(n.state.options[s].value===n.state.last_select){a=s;break}}switch(e.code){case"ArrowDown":r=a===n.state.options.length-1?n.state.options[0]:n.state.options[a+1];break;case"ArrowUp":r=0===a?n.state.options[n.state.options.length-1]:n.state.options[a-1]}n.setState({last_select:r.value}),n.state.open||n.set_value(r.value);break;case"Enter":n.state.open?n.set_value(n.state.last_select):n.setState({open:!0});break;case"Space":n.setState({open:!0});break;default:t=!1}t&&e.preventDefault()},onBlur:function(e){e.target.contains(e.relatedTarget)||n.setState({open:!1})},children:[(0,f.jsxs)("div",{className:"toggle",onClick:(0,s.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({open:!n.state.open,last_select:n.state.value}),n.container.current.focus();case 2:case"end":return e.stop()}}),e)}))),children:[t.name,(0,f.jsx)(v,{})]}),(0,f.jsx)("div",{className:"list",onMouseLeave:function(){n.setState({last_select:void 0})},children:l})]}))}}]),n}(m.Component)},640:function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var r=n(5861),a=n(5671),s=n(3144),o=n(136),i=n(3668),c=n(7757),u=n.n(c),l=n(2791),h=n(9911),p=n(6740),d=n(3504),f=n(8424),v=n(4766),m=n(2126),x=(n(3415),n(184)),y=function(e){(0,o.Z)(c,e);var t=(0,i.Z)(c);function c(e){var n;(0,a.Z)(this,c),(n=t.call(this,e)).api=new p._V(h.YA),n.settings=new f.Z("games category ".concat(n.props.id," settings"),{sort:"Most Played"}),n.abort=new AbortController;for(var r=[],s=0;s<40;s++)r.push({id:s,loading:!0});return n.state={data:r,error:void 0,possible_error:void 0},n}return(0,s.Z)(c,[{key:"possible_error",value:function(){var e=(0,r.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({possible_error:t});case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"layout",get:function(){return this.props.layout}},{key:"search",value:function(){var e=(0,r.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0!==this.abort&&this.abort.abort(),this.abort=new AbortController,e.next=4,this.api.category({sort:"search",search:t,limit:8},this.abort.signal);case 4:n=e.sent,this.setState({category:n});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetch",value:function(){var e=(0,r.Z)(u().mark((function e(){var t,n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!1,e.t0=this.settings.get("sort"),e.next="Least Played"===e.t0?4:"Most Played"===e.t0?5:"Least Favorites"===e.t0?7:"Most Favorites"===e.t0?8:"Name (Z-A)"===e.t0?10:"Name (A-Z)"===e.t0?11:13;break;case 4:t=!0;case 5:return n="plays",e.abrupt("break",15);case 7:t=!0;case 8:return n="favorites",e.abrupt("break",15);case 10:t=!0;case 11:return n="name",e.abrupt("break",15);case 13:return console.warn("Unknown sort",this.settings.get("sort")),e.abrupt("break",15);case 15:return e.prev=15,e.next=18,this.possible_error("Unable to fetch the category data.");case 18:return e.next=20,this.api.category({category:this.props.id,sort:n,leastGreatest:t},this.abort.signal);case 20:return r=e.sent,e.next=23,this.possible_error();case 23:return e.abrupt("return",this.setState({data:r}));case 26:return e.prev=26,e.t1=e.catch(15),console.error(e.t1),e.abrupt("return",this.setState({error:e.t1}));case 30:case"end":return e.stop()}}),e,this,[[15,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.fetch()}},{key:"componentWillUnmount",value:function(){this.abort.abort()}},{key:"render",value:function(){var e,t=this;return(0,h.jQ)("games-category"),void 0!==this.state.error?(e=void 0===this.state.possible_error?(0,x.jsx)("pre",{children:this.state.error}):(0,x.jsx)("pre",{children:this.state.possible_error}),(0,x.jsxs)("main",{ref:this.container,children:[(0,x.jsxs)("span",{children:["An error occured when loading the category:",(0,x.jsx)("br",{}),e]}),(0,x.jsxs)("p",{children:["Try again by clicking"," ",(0,x.jsx)("a",{href:"i:",onClick:function(e){e.preventDefault(),n.g.location.reload()},children:"here"}),".",(0,x.jsx)("br",{}),"If this problem still occurs, check"," ",(0,x.jsx)(d.rU,{to:"/support.html",target:"_parent",children:"Support"})," ","or"," ",(0,x.jsx)(d.rU,{to:"/contact.html",target:"_parent",children:"Contact Us"}),"."]})]})):(0,x.jsxs)("main",{children:[(0,x.jsxs)(v.Z,{className:"sort",defaultValue:this.settings.get("sort"),onChange:function(e){t.settings.set("sort",e.target.value),t.fetch()},children:[(0,x.jsx)("option",{value:"Most Played",children:"Most Played"}),(0,x.jsx)("option",{value:"Least Played",children:"Least Played"}),(0,x.jsx)("option",{value:"Name (A-Z)",children:"Name (A-Z)"}),(0,x.jsx)("option",{value:"Name (Z-A)",children:"Name (Z-A)"})]}),(0,x.jsx)(p.$0,{name:m[this.props.id].name,items:this.state.data,layout:this.layout})]})}}]),c}(l.Component)},3415:function(){}}]);
//# sourceMappingURL=640.4d7ad949.chunk.js.map