{"version":3,"file":"static/js/5.b2585592.chunk.js","mappings":"oQAMe,SAASA,EAAWC,GAClC,IAAMC,GAAeC,EAAAA,EAAAA,UAkDrB,OAhDAC,EAAAA,EAAAA,YAAU,YACJ,iBAAC,8GAIJC,EAAc,0CAJV,SAKEH,EAAaI,QAAQC,QALvB,cAMJF,OAAcG,EANV,EAQkBC,EAAAA,EAAdC,EARJ,EAQIA,WAEFC,EAAS,CACdC,KAAMC,EAAAA,GACNC,UAAW,YAOJC,SAAWL,EAAUM,UAC5BL,EAAOM,MAAQP,EAAUQ,UAGpBC,EAAO,IAAIT,EAAUC,GAE3BN,EAAc,gDAzBV,UA0BEc,EAAKC,MA1BP,eA2BJf,OAAcG,EAEdH,EAAc,8BA7BV,UA+BgBgB,MAAMR,EAAAA,IA/BtB,YA+BGD,EA/BH,QAgCOU,GAhCP,kCAiCUV,EAAKW,OAjCf,6BAoCJlB,OAAcG,EAEdC,EAAAA,EAAOe,SAASC,OACfN,EAAKO,KAAKzB,EAAM0B,cAAcrB,QAAQsB,cAvCnC,kDA0CJ3B,EAAM0B,cAAcrB,QAAQuB,OAA5B,KAA0CxB,EAAa,SA1CnD,yDAAD,KA6CH,CAACJ,EAAM0B,cAAezB,KAGxB,kBAAM4B,UAAU,SAAhB,WACC,SAAC,KAAD,CAAQC,IAAI,yBAAyBC,IAAK9B,IAD3C,YAES,SAAC,KAAD,oBAFT","sources":["pages/compat/Stomp.js"],"sourcesContent":["import process from 'process';\nimport { useEffect, useRef } from 'react';\nimport { Script } from '../../CompatLayout.js';\nimport { Obfuscated } from '../../obfuscate.js';\nimport { BARE_API } from '../../root.js';\n\nexport default function Rammerhead(props) {\n\tconst bootstrapper = useRef();\n\n\tuseEffect(() => {\n\t\tvoid (async function () {\n\t\t\tlet error_cause;\n\n\t\t\ttry {\n\t\t\t\terror_cause = 'Failure loading the Stomp bootstrapper.';\n\t\t\t\tawait bootstrapper.current.promise;\n\t\t\t\terror_cause = undefined;\n\n\t\t\t\tconst { StompBoot } = global;\n\n\t\t\t\tconst config = {\n\t\t\t\t\tbare: BARE_API,\n\t\t\t\t\tdirectory: '/stomp/',\n\t\t\t\t};\n\n\t\t\t\tif (\"production\" === 'development') {\n\t\t\t\t\tconfig.loglevel = StompBoot.LOG_TRACE;\n\t\t\t\t\tconfig.codec = StompBoot.CODEC_PLAIN;\n\t\t\t\t} else {\n\t\t\t\t\tconfig.loglevel = StompBoot.LOG_ERROR;\n\t\t\t\t\tconfig.codec = StompBoot.CODEC_XOR;\n\t\t\t\t}\n\n\t\t\t\tconst boot = new StompBoot(config);\n\n\t\t\t\terror_cause = 'Failure registering the Stomp Service Worker.';\n\t\t\t\tawait boot.ready;\n\t\t\t\terror_cause = undefined;\n\n\t\t\t\terror_cause = 'Bare server is unreachable.';\n\t\t\t\t{\n\t\t\t\t\tconst bare = await fetch(BARE_API);\n\t\t\t\t\tif (!bare.ok) {\n\t\t\t\t\t\tthrow await bare.json();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\terror_cause = undefined;\n\n\t\t\t\tglobal.location.assign(\n\t\t\t\t\tboot.html(props.compat_layout.current.destination)\n\t\t\t\t);\n\t\t\t} catch (error) {\n\t\t\t\tprops.compat_layout.current.report(error, error_cause, 'Stomp');\n\t\t\t}\n\t\t})();\n\t}, [props.compat_layout, bootstrapper]);\n\n\treturn (\n\t\t<main className=\"compat\">\n\t\t\t<Script src=\"/stomp/bootstrapper.js\" ref={bootstrapper} />\n\t\t\tLoading <Obfuscated>Stomp</Obfuscated>...\n\t\t</main>\n\t);\n}\n"],"names":["Rammerhead","props","bootstrapper","useRef","useEffect","error_cause","current","promise","undefined","global","StompBoot","config","bare","BARE_API","directory","loglevel","LOG_ERROR","codec","CODEC_XOR","boot","ready","fetch","ok","json","location","assign","html","compat_layout","destination","report","className","src","ref"],"sourceRoot":""}