{"version":3,"file":"static/js/640.4d7ad949.chunk.js","mappings":"6UA6BaA,EAAb,WACC,WAAYC,IAAS,eACpBC,KAAKD,OAASA,EAFhB,sEAIC,WAAWE,GAAX,uFACwBC,MAAM,IAAIC,IAAJ,kBAAmBF,EAAnB,KAA0BD,KAAKD,SAD7D,WACOK,EADP,QAGeC,GAHf,gCAIcD,EAASE,OAJvB,2CAOcF,EAASE,OAPvB,yFAJD,kHAaC,WAAiBL,EAAIM,GAArB,uFACwBL,MACtB,IAAIC,IACH,kBAAWF,EAAX,WACC,IAAIO,gBAAgB,CACnBD,MAAAA,IAEFP,KAAKD,QAEN,CACCU,OAAQ,QAVX,WACOL,EADP,QAceC,GAdf,gCAecD,EAASE,OAfvB,2CAkBcF,EAASE,OAlBvB,yFAbD,kFAiCC,SAAYI,GACX,IAAK,IAAIC,KAASD,EACjB,cAAeA,EAAOC,IACrB,IAAK,YACL,IAAK,gBACGD,EAAOC,GAMjB,OAAOD,IA5CT,yDAoDC,WAAeA,EAAQE,GAAvB,uFACwBV,MACtB,IAAIC,IACH,YAAc,IAAIK,gBAAgBR,KAAKa,YAAYH,IACnDV,KAAKD,QAEN,CAAEa,OAAAA,IANJ,WACOR,EADP,QASeC,GATf,gCAUcD,EAASE,OAVvB,2CAacF,EAASE,OAbvB,yFApDD,gEAqEO,SAASQ,EAAKC,GACpB,OAA6BC,EAAAA,EAAAA,WAAS,GAAtC,eAAOC,EAAP,KAAeC,EAAf,KAEA,OACC,SAAC,KAAD,CACCC,GAAE,WAAKC,EAAAA,EAAAA,GAAa,UAAW,UAA7B,eAA6CL,EAAMd,IACrDoB,QAAS,kBAAMN,EAAMO,OAAOC,QAAQC,SAAS,CAAEC,UAAU,KAF1D,UAIC,iBAAKC,UAAU,OAAf,WACC,gBAAKA,UAAU,YAAf,UACC,gBACCC,IAAI,GACJC,QAAQ,OACRC,OAAQ,kBAAMX,GAAW,IACzB,cAAaY,OAAOb,GACpBc,IAAG,sBAAiBhB,EAAMd,GAAvB,cAGL,gBAAKyB,UAAU,OAAf,UACC,SAAC,KAAD,CAAYM,UAAQ,EAApB,SAAsBjB,EAAMkB,cAO1B,SAASC,EAAYnB,GAC3B,OACC,iBAAKW,UAAU,eAAf,WACC,gBAAKA,UAAU,eACf,gBAAKA,UAAU,YAKX,SAASS,EAASpB,GACxB,IAD+B,EACzBqB,EAAQ,GADiB,UAGdrB,EAAMqB,OAHQ,IAG/B,2BAA8B,CAAC,IAAtBC,EAAqB,QACzBA,EAAKT,QACRQ,EAAME,MACL,SAACJ,EAAD,CAA2BjC,GAAIoC,EAAKpC,GAAIqB,OAAQP,EAAMO,QAApCe,EAAKpC,KAGxBmC,EAAME,MACL,SAACxB,EAAD,CAECb,GAAIoC,EAAKpC,GACTgC,KAAMI,EAAKJ,KACXX,OAAQP,EAAMO,QAHTe,EAAKpC,MAXiB,8BAoB/B,OAAOmC,EAGD,SAASG,EAAQxB,GACvB,OACC,gCACC,gBAAKW,UAAU,OAAf,UACC,wBAAKX,EAAMkB,UAEZ,gBAAKP,UAAU,QAAf,UACC,SAACS,EAAD,CAAUC,MAAOrB,EAAMqB,MAAOd,OAAQP,EAAMO,gB,8KCjKhD,GAAekB,EAAAA,EAAAA,IAA4BC,EAAAA,EAAAA,KAAK,OAAQ,CACtDC,EAAG,iDACD,c,qCCDiBC,EAAAA,SAAAA,IAAAA,EAAAA,EAAAA,GAAAA,EAAAA,GAAAA,IAAAA,GAAAA,EAAAA,EAAAA,GAAAA,GAGpB,WAAY5B,GAAQ,IAAD,mBAClB,cAAMA,IAHP6B,QAAU,GAES,EADnBC,WAAYC,EAAAA,EAAAA,aAIX,IAHkB,EAGZF,EAAU,GAHE,UAKA,EAAK7B,MAAMgC,UALX,IAKlB,2BAAuC,CAAC,IAA/BC,EAA8B,QACnB,WAAfA,EAAMC,MACTL,EAAQN,KAAK,CACZL,KAAMe,EAAMjC,MAAMgC,SAClBG,MAAOF,EAAMjC,MAAMmC,SATJ,qCAclB,EAAKC,MAAQ,CACZD,MAAO,EAAKnC,MAAMmC,OAAS,EAAKnC,MAAMqC,aACtCC,MAAM,EACNT,QAAAA,GAjBiB,EAwLlB,OArKA,oEACD,WAAgBM,GAAhB,iFACOlD,KAAKwB,SAAS,CACnB0B,MAAAA,EACAG,MAAM,IAHR,OAMCrD,KAAK6C,UAAUtB,QAAQ2B,MAAQlD,KAAKmD,MAAMD,MAEP,oBAAxBlD,KAAKe,MAAMuC,UACrBtD,KAAKe,MAAMuC,SAAS,CAAEC,OAAQvD,KAAK6C,UAAUtB,UAT/C,mGADC,IACD,oBAYA,WAAU,IAAD,EA8BJiC,EA9BI,OACR,EAA+CxD,KAAKe,MAA5CW,EAAR,EAAQA,UAAwB+B,GAAhC,EAAmBH,UAAnB,aAEMI,EAAO,GAHL,UAKoB1D,KAAKmD,MAAMP,SAL/B,mCAKGX,EALH,EAKGA,KAAMiB,EALT,EAKSA,MACVS,EAAU,CAAC,gBAEbT,IAAU,EAAKC,MAAMS,aACxBD,EAAQrB,KAAK,SAGdoB,EAAKpB,MACJ,gBACCZ,UAAWiC,EAAQE,KAAK,KAExBxC,QAAS,WACR,EAAKyC,UAAUZ,IAEhBa,YAAa,WACZ,EAAKvC,SAAS,CACboC,YAAaV,KARhB,SAYEjB,GAVIiB,KAVR,2BAAiD,IALzC,8CAgCWlD,KAAKmD,MAAMP,SAhCtB,IAgCR,2BAAuC,CAAC,IAA/BoB,EAA8B,QACtC,GAAIA,EAAOd,QAAUlD,KAAKmD,MAAMD,MAAO,CACtCM,EAAgBQ,EAChB,QAnCM,8BA2CR,YAJsBC,IAAlBT,IACHA,EAAgBxD,KAAKmD,MAAMP,QAAQ,KAInC,mCACKa,GADL,IAECS,SAAS,IACTxC,UAAW,gBAAkBA,EAAY,IAAMA,EAAY,IAC3D,YAAWI,OAAO9B,KAAKmD,MAAME,MAC7Bc,IAAKnE,KAAK6C,UACVuB,UAAW,SAAAC,GACV,IAAIC,GAAkB,EAEtB,OAAQD,EAAME,MACb,IAAK,YACL,IAAK,UAIH,IAFA,IAWIC,EAXAC,EAAS,EAEJC,EAAI,EAAGA,EAAI,EAAKvB,MAAMP,QAAQ+B,OAAQD,IAAK,CAGnD,GAFkB,EAAKvB,MAAMP,QAAQ8B,GAA7BxB,QAEM,EAAKC,MAAMS,YAAa,CACrCa,EAASC,EACT,OAMF,OAAQL,EAAME,MACb,IAAK,YAEHC,EADGC,IAAW,EAAKtB,MAAMP,QAAQ+B,OAAS,EACnC,EAAKxB,MAAMP,QAAQ,GAEnB,EAAKO,MAAMP,QAAQ6B,EAAS,GAEpC,MACD,IAAK,UAEHD,EADc,IAAXC,EACI,EAAKtB,MAAMP,QAAQ,EAAKO,MAAMP,QAAQ+B,OAAS,GAE/C,EAAKxB,MAAMP,QAAQ6B,EAAS,GAMtC,EAAKjD,SAAS,CACboC,YAAaY,EAAKtB,QAGd,EAAKC,MAAME,MACf,EAAKS,UAAUU,EAAKtB,OAGtB,MACD,IAAK,QACA,EAAKC,MAAME,KACd,EAAKS,UAAU,EAAKX,MAAMS,aAE1B,EAAKpC,SAAS,CACb6B,MAAM,IAGR,MACD,IAAK,QACJ,EAAK7B,SAAS,CACb6B,MAAM,IAEP,MACD,QACCiB,GAAkB,EAKhBA,GACHD,EAAMO,kBAGRC,OAAQ,SAAAR,GACFA,EAAMd,OAAOuB,SAAST,EAAMU,gBAChC,EAAKvD,SAAS,CAAE6B,MAAM,KA/EzB,WAmFC,iBACC3B,UAAU,SACVL,SAAO,iBAAE,8EACR,EAAKG,SAAS,CACb6B,MAAO,EAAKF,MAAME,KAClBO,YAAa,EAAKT,MAAMD,QAEzB,EAAKL,UAAUtB,QAAQyD,QALf,2CAFV,UAUExB,EAAcvB,MACf,SAACgD,EAAD,QAED,gBACCvD,UAAU,OACVwD,aAAc,WACb,EAAK1D,SAAS,CACboC,iBAAaK,KAJhB,SAQEP,YAIJ,EA3LmBf,CAAoBwC,EAAAA,Y,kOCMpBC,EAAAA,SAAAA,IAAAA,EAAAA,EAAAA,GAAAA,EAAAA,GAAAA,IAAAA,GAAAA,EAAAA,EAAAA,GAAAA,GACpB,WAAYrE,GAAQ,IAAD,mBAClB,cAAMA,IA6BPsE,IAAM,IAAIvF,EAAAA,GAASwF,EAAAA,IA9BA,EA+BnBC,SAAW,IAAIC,EAAAA,EAAJ,yBAA+B,EAAKzE,MAAMd,GAA1C,aAAyD,CACnEwF,KAAM,gBAhCY,EAkCnBC,MAAQ,IAAIC,gBA7BX,IAFA,IAAMC,EAAO,GAEJlB,EAAI,EAAGA,EAAI,GAAIA,IACvBkB,EAAKtD,KAAK,CACTrC,GAAIyE,EACJ9C,SAAS,IARO,OAYlB,EAAKuB,MAAQ,CACZyC,KAAAA,EACAC,WAAO5B,EACP6B,oBAAgB7B,GAfC,EAuLlB,OAtKA,yEACD,WAAqB8B,GAArB,iEAEC/F,KAAKwB,SAAS,CACbsE,eAAgBC,IAHlB,mGADC,IASF,kBACC,WACC,OAAO/F,KAAKe,MAAMO,SAClB,uDAMD,WAAa0E,GAAb,mFACoB/B,IAAfjE,KAAK0F,OACR1F,KAAK0F,MAAMA,QAGZ1F,KAAK0F,MAAQ,IAAIC,gBALlB,SAOwB3F,KAAKqF,IAAIY,SAC/B,CACCR,KAAM,SACNS,OAAQF,EACRG,MAAO,GAERnG,KAAK0F,MAAM9E,QAbb,OAOOqF,EAPP,OAgBCjG,KAAKwB,SAAS,CACbyE,SAAAA,IAjBF,mGANC,IAMD,sDAqBA,wFACKG,GAAgB,EADrB,KAISpG,KAAKuF,SAASc,IAAI,QAJ3B,OAKO,iBALP,OAQO,gBARP,OAWO,oBAXP,OAcO,mBAdP,OAiBO,eAjBP,QAoBO,eApBP,wBAMGD,GAAgB,EANnB,cASGX,EAAO,QATV,4BAYGW,GAAgB,EAZnB,cAeGX,EAAO,YAfV,6BAkBGW,GAAgB,EAlBnB,eAqBGX,EAAO,OArBV,oCAwBGa,QAAQC,KAAK,eAAgBvG,KAAKuF,SAASc,IAAI,SAxBlD,wDA6BQrG,KAAK8F,eAAe,sCA7B5B,yBA+BqB9F,KAAKqF,IAAIY,SAC3B,CACCA,SAAUjG,KAAKe,MAAMd,GACrBwF,KAAAA,EACAW,cAAAA,GAEDpG,KAAK0F,MAAM9E,QArCd,eA+BQgF,EA/BR,iBAwCQ5F,KAAK8F,iBAxCb,iCA0CS9F,KAAKwB,SAAS,CACpBoE,KAAAA,KA3CH,0CA8CEU,QAAQT,MAAR,MA9CF,kBAgDS7F,KAAKwB,SAAS,CACpBqE,MAAK,QAjDR,6GArBA,IAqBA,+BAqDA,WACC7F,KAAKE,UACL,kCACD,WACCF,KAAK0F,MAAMA,UACX,oBACD,WAAU,IAIJc,EAJG,OAGR,OAFAC,EAAAA,EAAAA,IAAS,uBAEgBxC,IAArBjE,KAAKmD,MAAM0C,OAIbW,OADiCvC,IAA9BjE,KAAKmD,MAAM2C,gBACA,yBAAM9F,KAAKmD,MAAM0C,SAEjB,yBAAM7F,KAAKmD,MAAM2C,kBAI/B,kBAAM3B,IAAKnE,KAAK6C,UAAhB,WACC,2EAEC,kBACC2D,MAEF,iDACuB,KACtB,cACCE,KAAK,KACLrF,QAAS,SAAAgD,GACRA,EAAMO,iBACN+B,EAAAA,EAAOC,SAASC,UAJlB,kBAFD,KAYC,kBAZD,sCAaqC,KACpC,SAAC,KAAD,CAAM1F,GAAG,gBAAgBoC,OAAO,UAAhC,qBAEQ,IAhBT,KAiBI,KACH,SAAC,KAAD,CAAMpC,GAAG,gBAAgBoC,OAAO,UAAhC,wBAlBD,YA4BF,6BACC,UAAC,IAAD,CACC7B,UAAU,OACV0B,aAAcpD,KAAKuF,SAASc,IAAI,QAChC/C,SAAU,SAAAe,GACT,EAAKkB,SAASuB,IAAI,OAAQzC,EAAMd,OAAOL,OACvC,EAAKhD,SALP,WAQC,mBAAQgD,MAAM,cAAd,0BACA,mBAAQA,MAAM,eAAd,2BACA,mBAAQA,MAAM,aAAd,yBACA,mBAAQA,MAAM,aAAd,4BAED,SAAC,KAAD,CACCjB,KAAM8E,EAAW/G,KAAKe,MAAMd,IAAIgC,KAChCG,MAAOpC,KAAKmD,MAAMyC,KAClBtE,OAAQtB,KAAKsB,gBAIhB,EAxLmB8D,CAAiBD,EAAAA,Y","sources":["GamesCommon.js","../node_modules/@mui/icons-material/esm/ExpandMore.js","PlainSelect.js","pages/games/Category.js"],"sourcesContent":["import { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Obfuscated } from './obfuscate.js';\nimport { resolveRoute } from './Routes.js';\n\n/**\n *\n * @typedef {object} GamesCategoryParams\n * @property {boolean} [leastGreatest]\n * @property {string} [category]\n * @property {string} [sort]\n * @property {string} [search]\n * @property {number} [limit]\n * @property {number} [limitPerCategory]\n */\n\n/**\n *\n * @typedef {object} LimitedGame\n * @property {string} name\n * @property {string} id\n * @property {string} category\n */\n\n/**\n *\n * @typedef {LimitedGame[]} GamesCategory\n */\n\nexport class GamesAPI {\n\tconstructor(server) {\n\t\tthis.server = server;\n\t}\n\tasync game(id) {\n\t\tconst outgoing = await fetch(new URL(`./games/${id}/`, this.server));\n\n\t\tif (!outgoing.ok) {\n\t\t\tthrow await outgoing.json();\n\t\t}\n\n\t\treturn await outgoing.json();\n\t}\n\tasync game_plays(id, token) {\n\t\tconst outgoing = await fetch(\n\t\t\tnew URL(\n\t\t\t\t`./games/${id}/plays?` +\n\t\t\t\t\tnew URLSearchParams({\n\t\t\t\t\t\ttoken,\n\t\t\t\t\t}),\n\t\t\t\tthis.server\n\t\t\t),\n\t\t\t{\n\t\t\t\tmethod: 'PUT',\n\t\t\t}\n\t\t);\n\n\t\tif (!outgoing.ok) {\n\t\t\tthrow await outgoing.json();\n\t\t}\n\n\t\treturn await outgoing.json();\n\t}\n\tsort_params(params) {\n\t\tfor (let param in params) {\n\t\t\tswitch (typeof params[param]) {\n\t\t\t\tcase 'undefined':\n\t\t\t\tcase 'object':\n\t\t\t\t\tdelete params[param];\n\t\t\t\t\tbreak;\n\t\t\t\t// no default\n\t\t\t}\n\t\t}\n\n\t\treturn params;\n\t}\n\t/**\n\t *\n\t * @param {GamesCategoryParams} params\n\t * @param {AbortSignal} signal\n\t * @returns {GamesCategory}\n\t */\n\tasync category(params, signal) {\n\t\tconst outgoing = await fetch(\n\t\t\tnew URL(\n\t\t\t\t'./games/?' + new URLSearchParams(this.sort_params(params)),\n\t\t\t\tthis.server\n\t\t\t),\n\t\t\t{ signal }\n\t\t);\n\n\t\tif (!outgoing.ok) {\n\t\t\tthrow await outgoing.json();\n\t\t}\n\n\t\treturn await outgoing.json();\n\t}\n}\n\nexport function Item(props) {\n\tconst [loaded, set_loaded] = useState(false);\n\n\treturn (\n\t\t<Link\n\t\t\tto={`${resolveRoute('/games/', 'player')}?id=${props.id}`}\n\t\t\tonClick={() => props.layout.current.setState({ expanded: false })}\n\t\t>\n\t\t\t<div className=\"item\">\n\t\t\t\t<div className=\"thumbnail\">\n\t\t\t\t\t<img\n\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\tloading=\"lazy\"\n\t\t\t\t\t\tonLoad={() => set_loaded(true)}\n\t\t\t\t\t\tdata-loaded={Number(loaded)}\n\t\t\t\t\t\tsrc={`/thumbnails/${props.id}.webp`}\n\t\t\t\t\t></img>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"name\">\n\t\t\t\t\t<Obfuscated ellipsis>{props.name}</Obfuscated>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Link>\n\t);\n}\n\nexport function LoadingItem(props) {\n\treturn (\n\t\t<div className=\"item loading\">\n\t\t\t<div className=\"thumbnail\" />\n\t\t\t<div className=\"name\" />\n\t\t</div>\n\t);\n}\n\nexport function ItemList(props) {\n\tconst items = [];\n\n\tfor (let item of props.items) {\n\t\tif (item.loading) {\n\t\t\titems.push(\n\t\t\t\t<LoadingItem key={item.id} id={item.id} layout={props.layout} />\n\t\t\t);\n\t\t} else {\n\t\t\titems.push(\n\t\t\t\t<Item\n\t\t\t\t\tkey={item.id}\n\t\t\t\t\tid={item.id}\n\t\t\t\t\tname={item.name}\n\t\t\t\t\tlayout={props.layout}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t}\n\n\treturn items;\n}\n\nexport function Section(props) {\n\treturn (\n\t\t<section>\n\t\t\t<div className=\"name\">\n\t\t\t\t<h1>{props.name}</h1>\n\t\t\t</div>\n\t\t\t<div className=\"items\">\n\t\t\t\t<ItemList items={props.items} layout={props.layout} />\n\t\t\t</div>\n\t\t</section>\n\t);\n}\n","import createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z\"\n}), 'ExpandMore');","import { ExpandMore } from '@mui/icons-material';\nimport { Component, createRef } from 'react';\n\nexport default class PlainSelect extends Component {\n\toptions = [];\n\tcontainer = createRef();\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tconst options = [];\n\n\t\tfor (let child of this.props.children) {\n\t\t\tif (child.type === 'option') {\n\t\t\t\toptions.push({\n\t\t\t\t\tname: child.props.children,\n\t\t\t\t\tvalue: child.props.value,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tthis.state = {\n\t\t\tvalue: this.props.value || this.props.defaultValue,\n\t\t\topen: false,\n\t\t\toptions,\n\t\t};\n\t}\n\tasync set_value(value) {\n\t\tawait this.setState({\n\t\t\tvalue,\n\t\t\topen: false,\n\t\t});\n\n\t\tthis.container.current.value = this.state.value;\n\n\t\tif (typeof this.props.onChange === 'function') {\n\t\t\tthis.props.onChange({ target: this.container.current });\n\t\t}\n\t}\n\trender() {\n\t\tconst { className, onChange, ...attributes } = this.props;\n\n\t\tconst list = [];\n\n\t\tfor (let { name, value } of this.state.options) {\n\t\t\tconst classes = ['plain-option'];\n\n\t\t\tif (value === this.state.last_select) {\n\t\t\t\tclasses.push('hover');\n\t\t\t}\n\n\t\t\tlist.push(\n\t\t\t\t<div\n\t\t\t\t\tclassName={classes.join(' ')}\n\t\t\t\t\tkey={value}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tthis.set_value(value);\n\t\t\t\t\t}}\n\t\t\t\t\tonMouseOver={() => {\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tlast_select: value,\n\t\t\t\t\t\t});\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{name}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tlet active_option;\n\n\t\tfor (let option of this.state.options) {\n\t\t\tif (option.value === this.state.value) {\n\t\t\t\tactive_option = option;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (active_option === undefined) {\n\t\t\tactive_option = this.state.options[0];\n\t\t}\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\t{...attributes}\n\t\t\t\ttabIndex=\"0\"\n\t\t\t\tclassName={'theme-select' + (className ? ' ' + className : '')}\n\t\t\t\tdata-open={Number(this.state.open)}\n\t\t\t\tref={this.container}\n\t\t\t\tonKeyDown={event => {\n\t\t\t\t\tlet prevent_default = true;\n\n\t\t\t\t\tswitch (event.code) {\n\t\t\t\t\t\tcase 'ArrowDown':\n\t\t\t\t\t\tcase 'ArrowUp':\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlet last_i = 0;\n\n\t\t\t\t\t\t\t\tfor (let i = 0; i < this.state.options.length; i++) {\n\t\t\t\t\t\t\t\t\tconst { value } = this.state.options[i];\n\n\t\t\t\t\t\t\t\t\tif (value === this.state.last_select) {\n\t\t\t\t\t\t\t\t\t\tlast_i = i;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tlet next;\n\n\t\t\t\t\t\t\t\tswitch (event.code) {\n\t\t\t\t\t\t\t\t\tcase 'ArrowDown':\n\t\t\t\t\t\t\t\t\t\tif (last_i === this.state.options.length - 1) {\n\t\t\t\t\t\t\t\t\t\t\tnext = this.state.options[0];\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tnext = this.state.options[last_i + 1];\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tcase 'ArrowUp':\n\t\t\t\t\t\t\t\t\t\tif (last_i === 0) {\n\t\t\t\t\t\t\t\t\t\t\tnext = this.state.options[this.state.options.length - 1];\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tnext = this.state.options[last_i - 1];\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t// no default\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\tlast_select: next.value,\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tif (!this.state.open) {\n\t\t\t\t\t\t\t\t\tthis.set_value(next.value);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'Enter':\n\t\t\t\t\t\t\tif (this.state.open) {\n\t\t\t\t\t\t\t\tthis.set_value(this.state.last_select);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\topen: true,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'Space':\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\topen: true,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tprevent_default = false;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t// no default\n\t\t\t\t\t}\n\n\t\t\t\t\tif (prevent_default) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tonBlur={event => {\n\t\t\t\t\tif (!event.target.contains(event.relatedTarget)) {\n\t\t\t\t\t\tthis.setState({ open: false });\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"toggle\"\n\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\topen: !this.state.open,\n\t\t\t\t\t\t\tlast_select: this.state.value,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.container.current.focus();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{active_option.name}\n\t\t\t\t\t<ExpandMore />\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"list\"\n\t\t\t\t\tonMouseLeave={() => {\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tlast_select: undefined,\n\t\t\t\t\t\t});\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{list}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import { Component } from 'react';\nimport { DB_API, set_page } from '../../root.js';\nimport { GamesAPI, Section } from '../../GamesCommon.js';\nimport { Link } from 'react-router-dom';\nimport Settings from '../../Settings.js';\nimport PlainSelect from '../../PlainSelect.js';\nimport categories from './categories.json';\nimport '../../styles/GamesCategory.scss';\n\nexport default class Category extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tconst data = [];\n\n\t\tfor (let i = 0; i < 40; i++) {\n\t\t\tdata.push({\n\t\t\t\tid: i,\n\t\t\t\tloading: true,\n\t\t\t});\n\t\t}\n\n\t\tthis.state = {\n\t\t\tdata,\n\t\t\terror: undefined,\n\t\t\tpossible_error: undefined,\n\t\t};\n\t}\n\tasync possible_error(message) {\n\t\t// errors must be VERY verbose for the user\n\t\tthis.setState({\n\t\t\tpossible_error: message,\n\t\t});\n\t}\n\t/**\n\t * @returns {import('react').Ref<import('../../GamesLayout.js').default>}\n\t */\n\tget layout() {\n\t\treturn this.props.layout;\n\t}\n\tapi = new GamesAPI(DB_API);\n\tsettings = new Settings(`games category ${this.props.id} settings`, {\n\t\tsort: 'Most Played',\n\t});\n\tabort = new AbortController();\n\tasync search(query) {\n\t\tif (this.abort !== undefined) {\n\t\t\tthis.abort.abort();\n\t\t}\n\n\t\tthis.abort = new AbortController();\n\n\t\tconst category = await this.api.category(\n\t\t\t{\n\t\t\t\tsort: 'search',\n\t\t\t\tsearch: query,\n\t\t\t\tlimit: 8,\n\t\t\t},\n\t\t\tthis.abort.signal\n\t\t);\n\n\t\tthis.setState({\n\t\t\tcategory,\n\t\t});\n\t}\n\n\tasync fetch() {\n\t\tlet leastGreatest = false;\n\t\tlet sort;\n\n\t\tswitch (this.settings.get('sort')) {\n\t\t\tcase 'Least Played':\n\t\t\t\tleastGreatest = true;\n\t\t\t// falls through\n\t\t\tcase 'Most Played':\n\t\t\t\tsort = 'plays';\n\t\t\t\tbreak;\n\t\t\tcase 'Least Favorites':\n\t\t\t\tleastGreatest = true;\n\t\t\t// falls through\n\t\t\tcase 'Most Favorites':\n\t\t\t\tsort = 'favorites';\n\t\t\t\tbreak;\n\t\t\tcase 'Name (Z-A)':\n\t\t\t\tleastGreatest = true;\n\t\t\t// falls through\n\t\t\tcase 'Name (A-Z)':\n\t\t\t\tsort = 'name';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.warn('Unknown sort', this.settings.get('sort'));\n\t\t\t\tbreak;\n\t\t}\n\n\t\ttry {\n\t\t\tawait this.possible_error('Unable to fetch the category data.');\n\n\t\t\tconst data = await this.api.category(\n\t\t\t\t{\n\t\t\t\t\tcategory: this.props.id,\n\t\t\t\t\tsort,\n\t\t\t\t\tleastGreatest,\n\t\t\t\t},\n\t\t\t\tthis.abort.signal\n\t\t\t);\n\n\t\t\tawait this.possible_error();\n\n\t\t\treturn this.setState({\n\t\t\t\tdata,\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tconsole.error(error);\n\n\t\t\treturn this.setState({\n\t\t\t\terror,\n\t\t\t});\n\t\t}\n\t}\n\tcomponentDidMount() {\n\t\tthis.fetch();\n\t}\n\tcomponentWillUnmount() {\n\t\tthis.abort.abort();\n\t}\n\trender() {\n\t\tset_page('games-category');\n\n\t\tif (this.state.error !== undefined) {\n\t\t\tlet description;\n\n\t\t\tif (this.state.possible_error === undefined) {\n\t\t\t\tdescription = <pre>{this.state.error}</pre>;\n\t\t\t} else {\n\t\t\t\tdescription = <pre>{this.state.possible_error}</pre>;\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<main ref={this.container}>\n\t\t\t\t\t<span>\n\t\t\t\t\t\tAn error occured when loading the category:\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t{description}\n\t\t\t\t\t</span>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tTry again by clicking{' '}\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref=\"i:\"\n\t\t\t\t\t\t\tonClick={event => {\n\t\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t\tglobal.location.reload();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\there\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t.\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\tIf this problem still occurs, check{' '}\n\t\t\t\t\t\t<Link to=\"/support.html\" target=\"_parent\">\n\t\t\t\t\t\t\tSupport\n\t\t\t\t\t\t</Link>{' '}\n\t\t\t\t\t\tor{' '}\n\t\t\t\t\t\t<Link to=\"/contact.html\" target=\"_parent\">\n\t\t\t\t\t\t\tContact Us\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t.\n\t\t\t\t\t</p>\n\t\t\t\t</main>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<main>\n\t\t\t\t<PlainSelect\n\t\t\t\t\tclassName=\"sort\"\n\t\t\t\t\tdefaultValue={this.settings.get('sort')}\n\t\t\t\t\tonChange={event => {\n\t\t\t\t\t\tthis.settings.set('sort', event.target.value);\n\t\t\t\t\t\tthis.fetch();\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<option value=\"Most Played\">Most Played</option>\n\t\t\t\t\t<option value=\"Least Played\">Least Played</option>\n\t\t\t\t\t<option value=\"Name (A-Z)\">Name (A-Z)</option>\n\t\t\t\t\t<option value=\"Name (Z-A)\">Name (Z-A)</option>\n\t\t\t\t</PlainSelect>\n\t\t\t\t<Section\n\t\t\t\t\tname={categories[this.props.id].name}\n\t\t\t\t\titems={this.state.data}\n\t\t\t\t\tlayout={this.layout}\n\t\t\t\t/>\n\t\t\t</main>\n\t\t);\n\t}\n}\n"],"names":["GamesAPI","server","this","id","fetch","URL","outgoing","ok","json","token","URLSearchParams","method","params","param","signal","sort_params","Item","props","useState","loaded","set_loaded","to","resolveRoute","onClick","layout","current","setState","expanded","className","alt","loading","onLoad","Number","src","ellipsis","name","LoadingItem","ItemList","items","item","push","Section","createSvgIcon","_jsx","d","PlainSelect","options","container","createRef","children","child","type","value","state","defaultValue","open","onChange","target","active_option","attributes","list","classes","last_select","join","set_value","onMouseOver","option","undefined","tabIndex","ref","onKeyDown","event","prevent_default","code","next","last_i","i","length","preventDefault","onBlur","contains","relatedTarget","focus","ExpandMore","onMouseLeave","Component","Category","api","DB_API","settings","Settings","sort","abort","AbortController","data","error","possible_error","message","query","category","search","limit","leastGreatest","get","console","warn","description","set_page","href","global","location","reload","set","categories"],"sourceRoot":""}