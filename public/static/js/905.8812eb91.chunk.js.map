{"version":3,"file":"static/js/905.8812eb91.chunk.js","mappings":"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","sources":["GamesCommon.js","../node_modules/@mui/icons-material/esm/ArrowForward.js","pages/games/Popular.js","../node_modules/@mui/icons-material/esm/Search.js"],"sourcesContent":["import { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Obfuscated } from './obfuscate.js';\nimport { resolveRoute } from './Routes.js';\n\n/**\n *\n * @typedef {object} GamesCategoryParams\n * @property {boolean} [leastGreatest]\n * @property {string} [category]\n * @property {string} [sort]\n * @property {string} [search]\n * @property {number} [limit]\n * @property {number} [limitPerCategory]\n */\n\n/**\n *\n * @typedef {object} LimitedGame\n * @property {string} name\n * @property {string} id\n * @property {string} category\n */\n\n/**\n *\n * @typedef {LimitedGame[]} GamesCategory\n */\n\nexport class GamesAPI {\n\tconstructor(server) {\n\t\tthis.server = server;\n\t}\n\tasync game(id) {\n\t\tconst outgoing = await fetch(new URL(`./games/${id}/`, this.server));\n\n\t\tif (!outgoing.ok) {\n\t\t\tthrow await outgoing.json();\n\t\t}\n\n\t\treturn await outgoing.json();\n\t}\n\tasync game_plays(id, token) {\n\t\tconst outgoing = await fetch(\n\t\t\tnew URL(\n\t\t\t\t`./games/${id}/plays?` +\n\t\t\t\t\tnew URLSearchParams({\n\t\t\t\t\t\ttoken,\n\t\t\t\t\t}),\n\t\t\t\tthis.server\n\t\t\t),\n\t\t\t{\n\t\t\t\tmethod: 'PUT',\n\t\t\t}\n\t\t);\n\n\t\tif (!outgoing.ok) {\n\t\t\tthrow await outgoing.json();\n\t\t}\n\n\t\treturn await outgoing.json();\n\t}\n\tsort_params(params) {\n\t\tfor (let param in params) {\n\t\t\tswitch (typeof params[param]) {\n\t\t\t\tcase 'undefined':\n\t\t\t\tcase 'object':\n\t\t\t\t\tdelete params[param];\n\t\t\t\t\tbreak;\n\t\t\t\t// no default\n\t\t\t}\n\t\t}\n\n\t\treturn params;\n\t}\n\t/**\n\t *\n\t * @param {GamesCategoryParams} params\n\t * @param {AbortSignal} signal\n\t * @returns {GamesCategory}\n\t */\n\tasync category(params, signal) {\n\t\tconst outgoing = await fetch(\n\t\t\tnew URL(\n\t\t\t\t'./games/?' + new URLSearchParams(this.sort_params(params)),\n\t\t\t\tthis.server\n\t\t\t),\n\t\t\t{ signal }\n\t\t);\n\n\t\tif (!outgoing.ok) {\n\t\t\tthrow await outgoing.json();\n\t\t}\n\n\t\treturn await outgoing.json();\n\t}\n}\n\nexport function Item(props) {\n\tconst [loaded, set_loaded] = useState(false);\n\n\treturn (\n\t\t<Link\n\t\t\tto={`${resolveRoute('/games/', 'player')}?id=${props.id}`}\n\t\t\tonClick={() => props.layout.current.setState({ expanded: false })}\n\t\t>\n\t\t\t<div className=\"item\">\n\t\t\t\t<div className=\"thumbnail\">\n\t\t\t\t\t<img\n\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\tloading=\"lazy\"\n\t\t\t\t\t\tonLoad={() => set_loaded(true)}\n\t\t\t\t\t\tdata-loaded={Number(loaded)}\n\t\t\t\t\t\tsrc={`/thumbnails/${props.id}.webp`}\n\t\t\t\t\t></img>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"name\">\n\t\t\t\t\t<Obfuscated ellipsis>{props.name}</Obfuscated>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Link>\n\t);\n}\n\nexport function LoadingItem(props) {\n\treturn (\n\t\t<div className=\"item loading\">\n\t\t\t<div className=\"thumbnail\" />\n\t\t\t<div className=\"name\" />\n\t\t</div>\n\t);\n}\n\nexport function ItemList(props) {\n\tconst items = [];\n\n\tfor (let item of props.items) {\n\t\tif (item.loading) {\n\t\t\titems.push(\n\t\t\t\t<LoadingItem key={item.id} id={item.id} layout={props.layout} />\n\t\t\t);\n\t\t} else {\n\t\t\titems.push(\n\t\t\t\t<Item\n\t\t\t\t\tkey={item.id}\n\t\t\t\t\tid={item.id}\n\t\t\t\t\tname={item.name}\n\t\t\t\t\tlayout={props.layout}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t}\n\n\treturn items;\n}\n\nexport function Section(props) {\n\treturn (\n\t\t<section>\n\t\t\t<div className=\"name\">\n\t\t\t\t<h1>{props.name}</h1>\n\t\t\t</div>\n\t\t\t<div className=\"items\">\n\t\t\t\t<ItemList items={props.items} layout={props.layout} />\n\t\t\t</div>\n\t\t</section>\n\t);\n}\n","import createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z\"\n}), 'ArrowForward');","import { Component, createRef } from 'react';\nimport { DB_API, set_page } from '../../root.js';\nimport { GamesAPI, ItemList } from '../../GamesCommon.js';\nimport { Link } from 'react-router-dom';\nimport { ArrowForward, Search } from '@mui/icons-material';\nimport categories from './categories.json';\nimport { Obfuscated } from '../../obfuscate.js';\nimport Settings from '../../Settings.js';\nimport '../../styles/GamesCategory.scss';\n\nfunction ExpandSection(props) {\n\treturn (\n\t\t<section className=\"expand\">\n\t\t\t<div className=\"name\">\n\t\t\t\t<h1>{props.name}</h1>\n\t\t\t\t<Link to={props.href} className=\"see-all\">\n\t\t\t\t\tSee All\n\t\t\t\t\t<ArrowForward />\n\t\t\t\t</Link>\n\t\t\t</div>\n\t\t\t<div className=\"items\">\n\t\t\t\t<ItemList items={props.items} layout={props.layout} />\n\t\t\t</div>\n\t\t</section>\n\t);\n}\n\nexport default class Popular extends Component {\n\tlimit = 8;\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tconst data = [];\n\n\t\tfor (let category in categories) {\n\t\t\tfor (let i = 0; i < this.limit; i++) {\n\t\t\t\tdata.push({\n\t\t\t\t\tid: i,\n\t\t\t\t\tloading: true,\n\t\t\t\t\tcategory,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tthis.state = {\n\t\t\tdata,\n\t\t\tcategory: [],\n\t\t\tinput_focused: false,\n\t\t};\n\t}\n\tsearchbar = createRef();\n\tinput = createRef();\n\tsettings = new Settings('common games', {\n\t\tfavorites: [],\n\t\tseen: [],\n\t});\n\tapi = new GamesAPI(DB_API);\n\tabort = new AbortController();\n\t/**\n\t * @returns {import('react').Ref<import('../MainLayout.js').default>}\n\t */\n\tget layout() {\n\t\treturn this.props.layout;\n\t}\n\tasync search(query) {\n\t\tif (this.abort !== undefined) {\n\t\t\tthis.abort.abort();\n\t\t}\n\n\t\tthis.abort = new AbortController();\n\n\t\ttry {\n\t\t\tconst category = await this.api.category(\n\t\t\t\t{\n\t\t\t\t\tsort: 'search',\n\t\t\t\t\tsearch: query,\n\t\t\t\t\tlimit: this.limit,\n\t\t\t\t},\n\t\t\t\tthis.abort.signal\n\t\t\t);\n\n\t\t\tthis.setState({\n\t\t\t\tcategory,\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tif (\n\t\t\t\terror.message !== 'The operation was aborted' &&\n\t\t\t\terror.message !== 'The user aborted a request.'\n\t\t\t) {\n\t\t\t\tconsole.error(error);\n\n\t\t\t\treturn this.setState({\n\t\t\t\t\terror,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\tasync fetch() {\n\t\ttry {\n\t\t\tconst data = await this.api.category({\n\t\t\t\tsort: 'plays',\n\t\t\t\tlimitPerCategory: this.limit,\n\t\t\t});\n\n\t\t\treturn this.setState({\n\t\t\t\tdata,\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tconsole.error(error);\n\n\t\t\treturn this.setState({\n\t\t\t\terror,\n\t\t\t});\n\t\t}\n\t}\n\tcomponentDidMount() {\n\t\tthis.fetch();\n\t}\n\tcomponentWillUnmount() {\n\t\tthis.abort.abort();\n\t}\n\trender() {\n\t\tset_page('games-category');\n\n\t\tconst render_suggested =\n\t\t\tthis.state.input_focused && this.state.category.length !== 0;\n\t\tconst suggested = [];\n\n\t\tif (render_suggested) {\n\t\t\tfor (let i = 0; i < this.state.category.length; i++) {\n\t\t\t\tconst game = this.state.category[i];\n\t\t\t\tlet category_name;\n\n\t\t\t\tif (game.category in categories) {\n\t\t\t\t\tcategory_name = categories[game.category].short;\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(`Unknown category ${game.category}`);\n\t\t\t\t\tcategory_name = '';\n\t\t\t\t}\n\n\t\t\t\tconst classes = ['option'];\n\n\t\t\t\tif (i === this.state.last_select) {\n\t\t\t\t\tclasses.push('hover');\n\t\t\t\t}\n\n\t\t\t\tsuggested.push(\n\t\t\t\t\t<Link\n\t\t\t\t\t\tkey={game.id}\n\t\t\t\t\t\tonClick={() => this.setState({ input_focused: false })}\n\t\t\t\t\t\tonMouseOver={() => {\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\tlast_select: i,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tto={`/games/player.html?id=${game.id}`}\n\t\t\t\t\t\tclassName={classes.join(' ')}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"name\">\n\t\t\t\t\t\t\t<Obfuscated ellipsis>{game.name}</Obfuscated>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"category\">{category_name}</div>\n\t\t\t\t\t</Link>\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tconst _categories = {};\n\n\t\tfor (let item of this.state.data) {\n\t\t\tif (!(item.category in _categories)) {\n\t\t\t\t_categories[item.category] = [];\n\t\t\t}\n\n\t\t\t_categories[item.category].push(item);\n\t\t}\n\n\t\tconst jsx_categories = [];\n\n\t\tfor (let id in _categories) {\n\t\t\tlet name;\n\n\t\t\tfor (let i in categories) {\n\t\t\t\tif (id === i) {\n\t\t\t\t\tname = categories[i].name;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tjsx_categories.push(\n\t\t\t\t<ExpandSection\n\t\t\t\t\thref={`/games/category.html?id=${id}`}\n\t\t\t\t\titems={_categories[id]}\n\t\t\t\t\tname={name}\n\t\t\t\t\tkey={id}\n\t\t\t\t\tlayout={this.layout}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<main>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"search-bar\"\n\t\t\t\t\tdata-focused={Number(this.state.input_focused)}\n\t\t\t\t\tdata-suggested={Number(render_suggested)}\n\t\t\t\t\tref={this.searchbar}\n\t\t\t\t\tonBlur={event => {\n\t\t\t\t\t\tif (!this.searchbar.current.contains(event.relatedTarget)) {\n\t\t\t\t\t\t\tthis.setState({ input_focused: false });\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"theme-input-bar\">\n\t\t\t\t\t\t<Search className=\"icon\" />\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tref={this.input}\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tplaceholder=\"Search by game name\"\n\t\t\t\t\t\t\tonFocus={event => {\n\t\t\t\t\t\t\t\tthis.setState({ input_focused: true, last_select: -1 });\n\t\t\t\t\t\t\t\tthis.search(event.target.value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonClick={event => {\n\t\t\t\t\t\t\t\tthis.setState({ input_focused: true, last_select: -1 });\n\t\t\t\t\t\t\t\tthis.search(event.target.value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonKeyDown={event => {\n\t\t\t\t\t\t\t\tlet prevent_default = true;\n\n\t\t\t\t\t\t\t\tswitch (event.code) {\n\t\t\t\t\t\t\t\t\tcase 'Escape':\n\t\t\t\t\t\t\t\t\t\tthis.setState({ input_focused: false });\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tcase 'ArrowDown':\n\t\t\t\t\t\t\t\t\tcase 'ArrowUp':\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tlet last_i = this.state.last_select;\n\n\t\t\t\t\t\t\t\t\t\t\tlet next;\n\n\t\t\t\t\t\t\t\t\t\t\tswitch (event.code) {\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'ArrowDown':\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (last_i >= this.state.category.length - 1) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnext = 0;\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnext = last_i + 1;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\tcase 'ArrowUp':\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (last_i <= 0) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnext = this.state.category.length - 1;\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnext = last_i - 1;\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t\t// no default\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\t\t\tlast_select: next,\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tcase 'Enter':\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tconst game = this.state.category[this.state.last_select];\n\n\t\t\t\t\t\t\t\t\t\t\tthis.input.current.blur();\n\t\t\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\t\t\tinput_focused: false,\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\tthis.props.navigate(`/games/player.html?id=${game.id}`);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tprevent_default = false;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t// no default\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (prevent_default) {\n\t\t\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonChange={event => {\n\t\t\t\t\t\t\t\tthis.search(event.target.value);\n\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\tlast_select: -1,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t></input>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"suggested\"\n\t\t\t\t\t\tonMouseLeave={() => {\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\tlast_select: -1,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{suggested}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{jsx_categories}\n\t\t\t</main>\n\t\t);\n\t}\n}\n","import createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"\n}), 'Search');"],"names":["GamesAPI","server","this","id","fetch","URL","outgoing","ok","json","token","URLSearchParams","method","params","param","signal","sort_params","Item","props","useState","loaded","set_loaded","to","resolveRoute","onClick","layout","current","setState","expanded","className","alt","loading","onLoad","Number","src","ellipsis","name","LoadingItem","ItemList","items","item","push","Section","createSvgIcon","_jsx","d","ExpandSection","href","ArrowForward","Popular","limit","searchbar","createRef","input","settings","Settings","favorites","seen","api","DB_API","abort","AbortController","data","category","categories","i","state","input_focused","query","undefined","sort","search","message","console","error","limitPerCategory","set_page","render_suggested","length","suggested","game","category_name","short","warn","classes","last_select","onMouseOver","join","_categories","jsx_categories","ref","onBlur","event","contains","relatedTarget","Search","type","placeholder","onFocus","target","value","onKeyDown","prevent_default","code","next","last_i","blur","navigate","preventDefault","onChange","onMouseLeave","Component"],"sourceRoot":""}