"use strict";(self.webpackChunkholyunblocker_website=self.webpackChunkholyunblocker_website||[]).push([[867],{212:function(e,t,r){r.d(t,{Z:function(){return b},P:function(){return g}});var n=r(1413),s=r(885),i=r(7762),a=r(5861),o=r(5671),c=r(3144),u=r(136),h=r(3668),f=r(7757),p=r.n(f),l=r(2791),d=r(3504),v=r(6871),x=r(4214),w=r(5829),m=r(9911),y=r(9040),k=r(184),b=function(e){(0,u.Z)(n,e);var t=(0,h.Z)(n);function n(){var e;(0,o.Z)(this,n);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).layout=new x.Z,e.container=(0,l.createRef)(),e.state={error:void 0,possible_error:void 0},e.name="Generic Proxy",e.scripts=new Map,e}return(0,c.Z)(n,[{key:"load_script",value:function(e){if(this.scripts.has(e))return Promise.resolve();var t=document.createElement("script");t.src=e,t.async=!0;var r=new Promise((function(e,r){t.addEventListener("load",(function(){e()})),t.addEventListener("error",(function(){r()}))}));return document.body.append(t),this.scripts.set(e,t),r}},{key:"destination",get:function(){if(""===this.props.location.hash)throw new Error("No hash was provided");return new URL(this.props.location.hash.slice(1))}},{key:"redirect",value:function(e){r.g.location.assign(e)}},{key:"_componentDidMount",value:function(){var e=(0,a.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=(0,a.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._componentDidMount();case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0),this.setState({error:e.t0.stack});case 9:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=(0,a.Z)(p().mark((function e(){var t,r,n,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,i.Z)(this.scripts);try{for(t.s();!(r=t.n()).done;)n=(0,s.Z)(r.value,2),a=n[0],n[1].remove(),this.scripts.delete(a)}catch(o){t.e(o)}finally{t.f()}case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"possible_error",value:function(){var e=(0,a.Z)(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({possible_error:t});case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e;return(0,m.jQ)("compat"),void 0!==this.state.error?(e=void 0===this.state.possible_error?(0,k.jsx)("pre",{children:this.state.error}):(0,k.jsx)("pre",{children:this.state.possible_error}),(0,k.jsxs)("main",{ref:this.container,children:[(0,k.jsxs)("span",{children:["An error occured when loading ",(0,k.jsx)(w.mj,{children:this.name}),":",(0,k.jsx)("br",{}),e]}),(0,k.jsxs)("p",{children:["Try again by clicking"," ",(0,k.jsx)("a",{href:"i:",onClick:function(e){e.preventDefault(),r.g.location.reload()},children:"here"}),".",(0,k.jsx)("br",{}),"If this problem still occurs, check our"," ",(0,k.jsx)(d.rU,{to:(0,y.k)("/","faq"),target:"_parent",children:"FAQ"})," ","or"," ",(0,k.jsx)(d.rU,{to:(0,y.k)("/","contact"),target:"_parent",children:"Contact Us"}),"."]})]})):(0,k.jsx)("main",{ref:this.container,children:(0,k.jsxs)("p",{children:[(0,k.jsx)(w.mj,{children:this.name})," is loading..."]})})}}]),n}(l.Component);function g(e){return(0,l.forwardRef)((function(t,r){return(0,k.jsx)(e,(0,n.Z)((0,n.Z)({},t),{},{ref:r,location:(0,v.TH)()}))}))}},4867:function(e,t,r){r.r(t),r.d(t,{default:function(){return v}});var n=r(5861),s=r(5671),i=r(3144),a=r(136),o=r(3668),c=r(7757),u=r.n(c),h=r(212),f=function(){function e(t){(0,s.Z)(this,e),this.app=t}return(0,i.Z)(e,[{key:"get",value:function(){var e=(0,n.Z)(u().mark((function e(t){var r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.password&&(t.includes("?")?t+="&pwd="+this.password:t+="?pwd="+this.password),(r=new XMLHttpRequest).open("GET",new URL(t,this.app),!0),n=new Promise((function(e,t){r.addEventListener("error",(function(){t(new Error("Cannot communicate with the server"))})),r.addEventListener("load",(function(){200===r.status?e(r.responseText):t(new Error('unexpected server response to not match "200". Server says "'.concat(r.responseText,'"')))}))})),r.send(),e.next=7,n;case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"needpassword",value:function(){var e=(0,n.Z)(u().mark((function e(t){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("needpassword");case 2:return r=e.sent,e.abrupt("return","true"===r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"newsession",value:function(){var e=(0,n.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("newsession");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"editsession",value:function(){var e=(0,n.Z)(u().mark((function e(t,r,n){var s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("editsession?id="+encodeURIComponent(t)+(r?"&httpProxy="+encodeURIComponent(r):"")+"&enableShuffling="+(n?"1":"0"));case 2:if("Success"===(s=e.sent)){e.next=5;break}throw new Error("unexpected response from server. received ".concat(s));case 5:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"sessionexists",value:function(){var e=(0,n.Z)(u().mark((function e(t){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("sessionexists?id="+encodeURIComponent(t));case 2:r=e.sent,e.t0=r,e.next="exists"===e.t0?6:"not found"===e.t0?7:8;break;case 6:return e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:throw new Error("unexpected response from server. received ".concat(r));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deletesession",value:function(){var e=(0,n.Z)(u().mark((function e(t){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sessionexists(t);case 2:if(!e.sent){e.next=8;break}return e.next=5,this.get("deletesession?id="+t);case 5:if("Success"===(r=e.sent)||"not found"===r){e.next=8;break}throw new Error("unexpected response from server. received ".concat(r));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"shuffleDict",value:function(){var e=(0,n.Z)(u().mark((function e(t){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("api/shuffleDict?id="+encodeURIComponent(t));case 2:return r=e.sent,e.abrupt("return",JSON.parse(r));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.generateDictionary();(0,s.Z)(this,e),this.baseDictionary="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~-",this.shuffledIndicator="_rhs",this.dictionary=t}return(0,i.Z)(e,[{key:"mod",value:function(e,t){return(e%t+t)%t}},{key:"generateDictionary",value:function(){for(var e="",t=this.baseDictionary.split("");t.length>0;)e+=t.splice(Math.floor(Math.random()*t.length),1)[0];return e}},{key:"shuffle",value:function(e){if((e=e.toString()).startsWith(this.shuffledIndicator))return e;for(var t="",r=0;r<e.length;r++){var n=e.charAt(r),s=this.baseDictionary.indexOf(n);"%"===n&&e.length-r>=3?(t+=n,t+=e.charAt(++r),t+=e.charAt(++r)):t+=-1===s?n:this.dictionary.charAt(this.mod(s+r,this.baseDictionary.length))}return this.shuffledIndicator+t}},{key:"unshuffle",value:function(e){if(!e.startsWith(this.shuffledIndicator))return e;e=e.slice(this.shuffledIndicator.length);for(var t="",r=0;r<e.length;r++){var n=e.charAt(r),s=this.dictionary.indexOf(n);"%"===n&&e.length-r>=3?(t+=n,t+=e.charAt(++r),t+=e.charAt(++r)):t+=-1===s?n:this.baseDictionary.charAt(this.mod(s-r,this.baseDictionary.length))}return t}}]),e}(),l=r(9911),d=function(e){(0,a.Z)(r,e);var t=(0,o.Z)(r);function r(){var e;(0,s.Z)(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).name="Rammerhead",e.api=new f(l.TH),e}return(0,i.Z)(r,[{key:"session",get:function(){return localStorage.rammerhead_session},set:function(e){localStorage.rammerhead_session=e}},{key:"_componentDidMount",value:function(){var e=(0,n.Z)(u().mark((function e(){var t,r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.possible_error("Rammerhead server is unreachable.");case 2:return e.next=4,fetch(l.TH);case 4:return e.next=6,this.possible_error();case 6:return e.next=8,this.possible_error("Unable to check if the saved session exists.");case 8:if(e.t0=!this.session,e.t0){e.next=13;break}return e.next=12,this.api.sessionexists(this.session);case 12:e.t0=!e.sent;case 13:if(!e.t0){e.next=22;break}return e.next=16,this.possible_error("Unable to create a new Rammerhead session.");case 16:return e.next=18,this.api.newsession();case 18:return t=e.sent,e.next=21,this.possible_error();case 21:this.session=t;case 22:return e.next=24,this.possible_error();case 24:return e.next=26,this.possible_error("Unable to edit a Rammerhead session.");case 26:return e.next=28,this.api.editsession(this.session,!1,!0);case 28:return e.next=30,this.possible_error();case 30:return e.next=32,this.possible_error("Unable to retrieve shuffled dictionary.");case 32:return e.next=34,this.api.shuffleDict(this.session);case 34:return r=e.sent,e.next=37,this.possible_error();case 37:n=new p(r),this.redirect(new URL("".concat(this.session,"/").concat(n.shuffle(this.destination)),l.TH));case 39:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(h.Z),v=(0,h.P)(d)}}]);
//# sourceMappingURL=867.0a0efb8b.chunk.js.map